{"version":3,"sources":["webpack:///./packages/dice-3d/resources/js/components/dice.js","webpack:///./packages/dice-3d/resources/js/pages/game.vue?ae27","webpack:///./resources/js/components/Games/GameMessage.vue?b023","webpack:///./resources/js/components/Games/PlayControls.vue?9b16","webpack:///./resources/audio/common/click.wav","webpack:///resources/js/components/Games/GameMessage.vue","webpack:///./resources/js/components/Games/GameMessage.vue?7cf6","webpack:///resources/js/components/Games/PlayControls.vue","webpack:///./resources/js/components/Games/PlayControls.vue?51ac","webpack:///resources/js/mixins/Game.vue","webpack:///./resources/js/mixins/Game.vue?cf5e","webpack:///./resources/js/components/Games/GameMessage.vue?0d2a","webpack:///./resources/js/components/Games/PlayControls.vue?7ed6","webpack:///./resources/js/components/Games/GameMessage.vue?6627","webpack:///./resources/js/components/Games/PlayControls.vue?1137","webpack:///./packages/dice-3d/resources/js/pages/game.vue?d3b3","webpack:///./packages/dice-3d/resources/audio/win.wav","webpack:///./packages/dice-3d/resources/audio/roll1.wav","webpack:///./packages/dice-3d/resources/audio/roll2.wav","webpack:///./packages/dice-3d/resources/audio/lose.wav","webpack:///packages/dice-3d/resources/js/pages/game.vue","webpack:///./packages/dice-3d/resources/js/pages/game.vue?cc2b","webpack:///./packages/dice-3d/resources/js/pages/game.vue?0ae7","webpack:///./packages/dice-3d/resources/js/pages/game.vue"],"names":["DiceManagerClass","this","world","diceBodyMaterial","CANNON","floorBodyMaterial","barrierBodyMaterial","addContactMaterial","friction","restitution","diceValues","floorBody","throwRunning","Error","i","length","value","dice","values","simulationRunning","stableCount","steps","sound","lastSound","push","getVisibleVectors","isContacts","collide","addEventListener","check","allStable","isFinished","simulateStep","DiceManager","removeEventListener","shiftUpperValue","step","DiceObject","options","setDefaults","size","fontColor","backColor","object","invertUpside","materialOptions","specular","color","shininess","flatShading","labelColor","diceColor","defaults","key","hasOwnProperty","callback","getUpsideValue","dt","angularVelocity","body","velocity","Math","abs","x","y","z","closestFace","vector","THREE","closestAngle","PI","geometry","faces","face","materialIndex","angle","normal","clone","applyQuaternion","quaternion","angleTo","position","vectors","toValue","shiftUpperValueCustom","fromValue","l","chamfer","chamferVectors","chamferFaces","cornerFaces","Array","ii","fl","centerPoint","j","vv","add","divideScalar","subVectors","multiplyScalar","addVectors","pairs","lastm","m","n","indexOf","unshift","cf","count","index","nextVertex","vertices","radius","tab","af","geom","vertex","aa","faceVertexUvs","cos","sin","computeFaceNormals","boundingSphere","cv","v","slice","scaleFactor","fromArray","normalize","chamferGeometry","getChamferGeometry","makeGeometry","cannon_shape","createShape","approx","max","pow","floor","log","text","canvas","document","createElement","context","getContext","ts","calculateTextureSize","textMargin","width","height","font","fillStyle","fillRect","textAlign","textBaseline","fillText","texture","needsUpdate","materials","faceTexts","customTextTextureFunction","createTextTexture","Object","assign","map","getGeometry","getMaterials","reveiceShadow","castShadow","diceObject","mass","shape","material","linearDamping","angularDamping","copy","diceValue","DiceD4","d4FaceTexts","diceValueNew","translate","rotate","inertia","create","DiceD6","DiceD8","DiceD10","b","DiceD12","p","sqrt","q","DiceD20","t","define","module","exports","window","Dice","___CSS_LOADER_EXPORT___","id","props","message","required","validator","mixins","Form","betLabel","type","String","default","playLabel","loading","Boolean","playing","disabled","provable","autoPlaySupport","autoPlayInterval","Number","data","bet","autoPlay","baseBet","onWin","reset","amount","onLoss","games","minBet","maxBet","betsCount","maxBetsCount","maxBalance","minBalance","winsCount","lossesCount","autoPlayInProgress","autoPlayEnabled","autoPlaySettingsDialog","autoPlayHistoryDialog","computed","defaultBet","parseInt","config","default_bet_amount","min_bet","max_bet","betStep","bet_change_amount","isPlayDisabled","autoPlayNetResult","reduce","watch","$emit","created","$nextTick","methods","play","click","decreaseBet","increaseBet","min","onGameCompleted","isWin","setBet","account","balance","stopAutoPlay","setTimeout","gamePackageId","$route","params","game","gameSlug","slug","provablyFairGame","$store","getters","getRoute","route","loadCardDeck","render","_vm","_h","$createElement","_c","_self","attrs","_v","_s","_e","staticRenderFns","ref","on","$event","preventDefault","model","$$v","formIsValid","expression","staticClass","$t","scopedSlots","_u","fn","_g","_b","validationInteger","$set","proxy","_n","validationNonNegativeInteger","_l","win","class","toFixed","_t","validationMin","validationMax","name","components","clickSound","roll1Sound","roll2Sound","refNumber","direction","diceFillColor","diceFontColor","roll","animation","dices","minRoll","maxRoll","rollsRangeLength","minRefNumber","maxRefNumber","houseEdge","winChance","payout","rollLessText","rollGreaterText","sliderTrackColor","sliderFillColor","mounted","pos","container","scene","camera","renderer","floorWidth","floorHeight","$refs","ThreeJS","offsetWidth","offsetHeight","aspect","camera_angle","camera_position","near","far","diceAnimationStep","isThrought","animate","requestAnimationFrame","set","lookAt","setClearColor","setSize","shadowMap","enabled","appendChild","domElement","ambient","directionalLight","light","target","shadow","mapSize","tan","fov","gravity","broadphase","solver","iterations","barrier","setFromAxisAngle","barrierCorner","forEach","d","diceThrow","ceil","random","randomAngle","vec","randomDiceThrow","rnd","boost","makeRandomVector","projector","velvec","touches","ev","changedTouches","stopPropagation","getMouseCoords","dist","timeInt","mouseStart","mouseEnd","start","beforeDestroy","decrementRefNumber","incrementRefNumber","component","VBtn"],"mappings":"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","file":"js/packages/dice-3d-resources-js-pages-game.js","sourcesContent":["import * as CANNON from 'cannon'\r\nimport * as THREE from 'three'\r\n\r\nclass DiceManagerClass {\r\n    constructor () {\r\n        this.world = null\r\n    }\r\n\r\n    setWorld (world) {\r\n        this.world = world\r\n\r\n        this.diceBodyMaterial = new CANNON.Material()\r\n        this.floorBodyMaterial = new CANNON.Material()\r\n        this.barrierBodyMaterial = new CANNON.Material()\r\n\r\n        world.addContactMaterial(\r\n            new CANNON.ContactMaterial(this.floorBodyMaterial, this.diceBodyMaterial, { friction: 0.01, restitution: 0.5 })\r\n        )\r\n        world.addContactMaterial(\r\n            new CANNON.ContactMaterial(this.barrierBodyMaterial, this.diceBodyMaterial, { friction: 0, restitution: 1.0 })\r\n        )\r\n        world.addContactMaterial(\r\n            new CANNON.ContactMaterial(this.diceBodyMaterial, this.diceBodyMaterial, { friction: 0, restitution: 0.5 })\r\n        )\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {array} diceValues\r\n     * @param {DiceObject} [diceValues.dice]\r\n     * @param {number} [diceValues.value]\r\n     *\r\n     */\r\n    prepareValues (diceValues, floorBody) {\r\n        if (this.throwRunning) throw new Error('Cannot start another throw. Please wait, till the current throw is finished.')\r\n\r\n        for (let i = 0; i < diceValues.length; i++) {\r\n            if (diceValues[i].value < 1 || diceValues[i].dice.values < diceValues[i].value) {\r\n                throw new Error('Cannot throw die to value ' + diceValues[i].value + ', because it has only ' + diceValues[i].dice.values + ' sides.')\r\n            }\r\n        }\r\n        this.throwRunning = true\r\n        for (let i = 0; i < diceValues.length; i++) {\r\n            diceValues[i].dice.simulationRunning = true\r\n            // diceValues[i].vectors = diceValues[i].dice.getCurrentVectors();\r\n            diceValues[i].stableCount = 0\r\n            diceValues[i].steps = []\r\n            diceValues[i].sound = []\r\n            diceValues[i].lastSound = 0\r\n            diceValues[i].steps.push(diceValues[i].dice.getVisibleVectors())\r\n        }\r\n        var isContacts = false\r\n        const collide = () => { isContacts = true }\r\n        floorBody.addEventListener('collide', collide)\r\n        const check = () => {\r\n            let allStable = true\r\n            for (let i = 0; i < diceValues.length; i++) {\r\n                if (diceValues[i].dice.isFinished()) {\r\n                    diceValues[i].stableCount++\r\n                } else {\r\n                    diceValues[i].stableCount = 0\r\n                }\r\n\r\n                if (diceValues[i].stableCount < 50) {\r\n                    allStable = false\r\n                }\r\n                diceValues[i].steps.push(diceValues[i].dice.getVisibleVectors())\r\n                diceValues[i].sound.push(isContacts)\r\n            }\r\n            isContacts = false\r\n            this.simulateStep++\r\n            if (allStable) {\r\n                // console.log(\"all stable\",this.simulateStep);\r\n                DiceManager.world.removeEventListener('postStep', check)\r\n                floorBody.removeEventListener('collide', collide)\r\n                for (let i = 0; i < diceValues.length; i++) {\r\n                    // console.log('Dice ',i,diceValues[i].value,diceValues[i].dice.getUpsideValue())\r\n                    diceValues[i].dice.shiftUpperValue(diceValues[i].value)\r\n                    // diceValues[i].dice.setVectors(diceValues[i].vectors);\r\n                    diceValues[i].dice.simulationRunning = false\r\n                }\r\n                this.throwRunning = false\r\n            } else {\r\n                DiceManager.world.step(1.00 / 60.00)\r\n            }\r\n        }\r\n\r\n        this.world.addEventListener('postStep', check)\r\n        DiceManager.world.step(1.00 / 60.00)\r\n    }\r\n}\r\n\r\nclass DiceObject {\r\n    /**\r\n     * @constructor\r\n     * @param {object} options\r\n     * @param {Number} [options.size = 100]\r\n     * @param {Number} [options.fontColor = '#000000']\r\n     * @param {Number} [options.backColor = '#ffffff']\r\n     */\r\n    constructor (options) {\r\n        options = this.setDefaults(options, {\r\n            size: 100,\r\n            fontColor: '#000000',\r\n            backColor: '#ffffff'\r\n        })\r\n\r\n        this.object = null\r\n        this.size = options.size\r\n        this.invertUpside = false\r\n\r\n        this.materialOptions = {\r\n            specular: 0x172022,\r\n            color: 0xf0f0f0,\r\n            shininess: 40,\r\n            flatShading: true\r\n        }\r\n        this.labelColor = options.fontColor\r\n        this.diceColor = options.backColor\r\n    }\r\n\r\n    setDefaults (options, defaults) {\r\n        options = options || {}\r\n\r\n        for (const key in defaults) {\r\n            if (!defaults.hasOwnProperty(key)) continue\r\n\r\n            if (!(key in options)) {\r\n                options[key] = defaults[key]\r\n            }\r\n        }\r\n\r\n        return options\r\n    }\r\n\r\n    emulateThrow (callback) {\r\n        let stableCount = 0\r\n\r\n        const check = () => {\r\n            if (this.isFinished()) {\r\n                stableCount++\r\n\r\n                if (stableCount === 50) {\r\n                    DiceManager.world.removeEventListener('postStep', check)\r\n                    callback(this.getUpsideValue())\r\n                }\r\n            } else {\r\n                stableCount = 0\r\n            }\r\n\r\n            DiceManager.world.step(DiceManager.world.dt)\r\n        }\r\n\r\n        DiceManager.world.addEventListener('postStep', check)\r\n    }\r\n\r\n    isFinished () {\r\n        const threshold = 1\r\n\r\n        const angularVelocity = this.object.body.angularVelocity\r\n        const velocity = this.object.body.velocity\r\n\r\n        return (\r\n                    Math.abs(angularVelocity.x) < threshold &&\r\n                    Math.abs(angularVelocity.y) < threshold &&\r\n                    Math.abs(angularVelocity.z) < threshold &&\r\n                    Math.abs(velocity.x) < threshold &&\r\n                    Math.abs(velocity.y) < threshold &&\r\n                    Math.abs(velocity.z) < threshold)\r\n    }\r\n\r\n    getUpsideValue () {\r\n        const vector = new THREE.Vector3(0, this.invertUpside ? -1 : 1)\r\n        let closestFace\r\n        let closestAngle = Math.PI * 2\r\n        for (let i = 0; i < this.object.geometry.faces.length; ++i) {\r\n            const face = this.object.geometry.faces[i]\r\n            if (face.materialIndex === 0) continue\r\n\r\n            const angle = face.normal.clone().applyQuaternion(this.object.body.quaternion).angleTo(vector)\r\n            if (angle < closestAngle) {\r\n                closestAngle = angle\r\n                closestFace = face\r\n            }\r\n        }\r\n\r\n        return closestFace.materialIndex - 1\r\n    }\r\n\r\n    getVisibleVectors () {\r\n        return {\r\n            position: this.object.body.position.clone(),\r\n            quaternion: this.object.body.quaternion.clone()\r\n        }\r\n    }\r\n\r\n    getCurrentVectors () {\r\n        return {\r\n            position: this.object.body.position.clone(),\r\n            quaternion: this.object.body.quaternion.clone(),\r\n            velocity: this.object.body.velocity.clone(),\r\n            angularVelocity: this.object.body.angularVelocity.clone()\r\n        }\r\n    }\r\n\r\n    setVectors (vectors) {\r\n        this.object.body.position = vectors.position\r\n        this.object.body.quaternion = vectors.quaternion\r\n        this.object.body.velocity = vectors.velocity\r\n        this.object.body.angularVelocity = vectors.angularVelocity\r\n    }\r\n\r\n    shiftUpperValue (toValue) {\r\n        var geometry = this.shiftUpperValueCustom(toValue)\r\n        if (!geometry) {\r\n            geometry = this.object.geometry.clone()\r\n            const fromValue = this.getUpsideValue()\r\n\r\n            for (let i = 0, l = geometry.faces.length; i < l; ++i) {\r\n                let materialIndex = geometry.faces[i].materialIndex\r\n                if (materialIndex === 0) continue\r\n\r\n                materialIndex += toValue - fromValue - 1\r\n                while (materialIndex > this.values) materialIndex -= this.values\r\n                while (materialIndex < 1) materialIndex += this.values\r\n\r\n                geometry.faces[i].materialIndex = materialIndex + 1\r\n            }\r\n        }\r\n        this.object.geometry = geometry\r\n    }\r\n\r\n    getChamferGeometry (vectors, faces, chamfer) {\r\n        const chamferVectors = []; const chamferFaces = []; const cornerFaces = new Array(vectors.length)\r\n        for (let i = 0; i < vectors.length; ++i) cornerFaces[i] = []\r\n        for (let i = 0; i < faces.length; ++i) {\r\n            const ii = faces[i]; const fl = ii.length - 1\r\n            const centerPoint = new THREE.Vector3()\r\n            const face = new Array(fl)\r\n            for (let j = 0; j < fl; ++j) {\r\n                const vv = vectors[ii[j]].clone()\r\n                centerPoint.add(vv)\r\n                cornerFaces[ii[j]].push(face[j] = chamferVectors.push(vv) - 1)\r\n            }\r\n            centerPoint.divideScalar(fl)\r\n            for (let j = 0; j < fl; ++j) {\r\n                const vv = chamferVectors[face[j]]\r\n                vv.subVectors(vv, centerPoint).multiplyScalar(chamfer).addVectors(vv, centerPoint)\r\n            }\r\n            face.push(ii[fl])\r\n            chamferFaces.push(face)\r\n        }\r\n        for (let i = 0; i < faces.length - 1; ++i) {\r\n            for (let j = i + 1; j < faces.length; ++j) {\r\n                const pairs = []; let lastm = -1\r\n                for (let m = 0; m < faces[i].length - 1; ++m) {\r\n                    const n = faces[j].indexOf(faces[i][m])\r\n                    if (n >= 0 && n < faces[j].length - 1) {\r\n                        if (lastm >= 0 && m !== lastm + 1) pairs.unshift([i, m], [j, n])\r\n                        else pairs.push([i, m], [j, n])\r\n                        lastm = m\r\n                    }\r\n                }\r\n                if (pairs.length !== 4) continue\r\n                chamferFaces.push([chamferFaces[pairs[0][0]][pairs[0][1]],\r\n                chamferFaces[pairs[1][0]][pairs[1][1]],\r\n                chamferFaces[pairs[3][0]][pairs[3][1]],\r\n                chamferFaces[pairs[2][0]][pairs[2][1]], -1])\r\n            }\r\n        }\r\n        for (let i = 0; i < cornerFaces.length; ++i) {\r\n            const cf = cornerFaces[i]; const face = [cf[0]]; let count = cf.length - 1\r\n            while (count) {\r\n                for (let m = faces.length; m < chamferFaces.length; ++m) {\r\n                    let index = chamferFaces[m].indexOf(face[face.length - 1])\r\n                    if (index >= 0 && index < 4) {\r\n                        if (--index === -1) index = 3\r\n                        const nextVertex = chamferFaces[m][index]\r\n                        if (cf.indexOf(nextVertex) >= 0) {\r\n                            face.push(nextVertex)\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                --count\r\n            }\r\n            face.push(-1)\r\n            chamferFaces.push(face)\r\n        }\r\n        return { vectors: chamferVectors, faces: chamferFaces }\r\n    }\r\n\r\n    makeGeometry (vertices, faces, radius, tab, af) {\r\n        const geom = new THREE.Geometry()\r\n        for (let i = 0; i < vertices.length; ++i) {\r\n            const vertex = vertices[i].multiplyScalar(radius)\r\n            vertex.index = geom.vertices.push(vertex) - 1\r\n        }\r\n        for (let i = 0; i < faces.length; ++i) {\r\n            const ii = faces[i]; const fl = ii.length - 1\r\n            const aa = Math.PI * 2 / fl\r\n            for (let j = 0; j < fl - 2; ++j) {\r\n                geom.faces.push(new THREE.Face3(ii[0], ii[j + 1], ii[j + 2], [geom.vertices[ii[0]],\r\n                geom.vertices[ii[j + 1]], geom.vertices[ii[j + 2]]], 0, ii[fl] + 1))\r\n                geom.faceVertexUvs[0].push([\r\n                    new THREE.Vector2((Math.cos(af) + 1 + tab) / 2 / (1 + tab),\r\n                        (Math.sin(af) + 1 + tab) / 2 / (1 + tab)),\r\n                    new THREE.Vector2((Math.cos(aa * (j + 1) + af) + 1 + tab) / 2 / (1 + tab),\r\n                        (Math.sin(aa * (j + 1) + af) + 1 + tab) / 2 / (1 + tab)),\r\n                    new THREE.Vector2((Math.cos(aa * (j + 2) + af) + 1 + tab) / 2 / (1 + tab),\r\n                        (Math.sin(aa * (j + 2) + af) + 1 + tab) / 2 / (1 + tab))])\r\n            }\r\n        }\r\n        geom.computeFaceNormals()\r\n        geom.boundingSphere = new THREE.Sphere(new THREE.Vector3(), radius)\r\n        return geom\r\n    }\r\n\r\n    createShape (vertices, faces, radius) {\r\n        const cv = new Array(vertices.length); const cf = new Array(faces.length)\r\n        for (let i = 0; i < vertices.length; ++i) {\r\n            const v = vertices[i]\r\n            cv[i] = new CANNON.Vec3(v.x * radius, v.y * radius, v.z * radius)\r\n        }\r\n        for (let i = 0; i < faces.length; ++i) {\r\n            cf[i] = faces[i].slice(0, faces[i].length - 1)\r\n        }\r\n        return new CANNON.ConvexPolyhedron(cv, cf)\r\n    }\r\n\r\n    getGeometry () {\r\n        const radius = this.size * this.scaleFactor\r\n\r\n        const vectors = new Array(this.vertices.length)\r\n        for (let i = 0; i < this.vertices.length; ++i) {\r\n            vectors[i] = (new THREE.Vector3()).fromArray(this.vertices[i]).normalize()\r\n        }\r\n\r\n        const chamferGeometry = this.getChamferGeometry(vectors, this.faces, this.chamfer)\r\n        const geometry = this.makeGeometry(chamferGeometry.vectors, chamferGeometry.faces, radius, this.tab, this.af)\r\n        geometry.cannon_shape = this.createShape(vectors, this.faces, radius)\r\n\r\n        return geometry\r\n    }\r\n\r\n    calculateTextureSize (approx) {\r\n        return Math.max(128, Math.pow(2, Math.floor(Math.log(approx) / Math.log(2))))\r\n    }\r\n\r\n    createTextTexture (text, color, backColor) {\r\n        const canvas = document.createElement('canvas')\r\n        const context = canvas.getContext('2d')\r\n        const ts = this.calculateTextureSize(this.size / 2 + this.size * this.textMargin) * 2\r\n        canvas.width = canvas.height = ts\r\n        context.font = ts / (1 + 2 * this.textMargin) + 'pt Arial'\r\n        context.fillStyle = backColor\r\n        context.fillRect(0, 0, canvas.width, canvas.height)\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.fillStyle = color\r\n        context.fillText(text, canvas.width / 2, canvas.height / 2)\r\n        const texture = new THREE.Texture(canvas)\r\n        texture.needsUpdate = true\r\n        return texture\r\n    }\r\n\r\n    getMaterials () {\r\n        const materials = []\r\n        for (let i = 0; i < this.faceTexts.length; ++i) {\r\n            let texture = null\r\n            if (this.customTextTextureFunction) {\r\n                texture = this.customTextTextureFunction(this.faceTexts[i], this.labelColor, this.diceColor)\r\n            } else {\r\n                texture = this.createTextTexture(this.faceTexts[i], this.labelColor, this.diceColor)\r\n            }\r\n\r\n            materials.push(new THREE.MeshPhongMaterial(Object.assign({}, this.materialOptions, { map: texture })))\r\n        }\r\n        return materials\r\n    }\r\n\r\n    getObject () {\r\n        return this.object\r\n    }\r\n\r\n    create () {\r\n        if (!DiceManager.world) throw new Error('You must call DiceManager.setWorld(world) first.')\r\n        this.object = new THREE.Mesh(this.getGeometry(), this.getMaterials())\r\n\r\n        this.object.reveiceShadow = true\r\n        this.object.castShadow = true\r\n        this.object.diceObject = this\r\n        this.object.body = new CANNON.Body({\r\n            mass: this.mass,\r\n            shape: this.object.geometry.cannon_shape,\r\n            material: DiceManager.diceBodyMaterial\r\n        })\r\n        this.object.body.linearDamping = 0.1\r\n        this.object.body.angularDamping = 0.1\r\n        DiceManager.world.add(this.object.body)\r\n\r\n        return this.object\r\n    }\r\n\r\n    updateMeshFromBody () {\r\n        if (!this.simulationRunning) {\r\n            this.object.position.copy(this.object.body.position)\r\n            this.object.quaternion.copy(this.object.body.quaternion)\r\n        }\r\n    }\r\n\r\n    updateBodyFromMesh () {\r\n        this.object.body.position.copy(this.object.position)\r\n        this.object.body.quaternion.copy(this.object.quaternion)\r\n    }\r\n\r\n    setMeshFrom (object) {\r\n        this.object.position.copy(object.position)\r\n        this.object.quaternion.copy(object.quaternion)\r\n    }\r\n\r\n    shiftUpperValueCustom (diceValue) { return null }\r\n}\r\n\r\nexport class DiceD4 extends DiceObject {\r\n    constructor (options) {\r\n        super(options)\r\n\r\n        this.tab = -0.1\r\n        this.af = Math.PI * 7 / 6\r\n        this.chamfer = 0.96\r\n        this.vertices = [[1, 1, 1], [-1, -1, 1], [-1, 1, -1], [1, -1, -1]]\r\n        this.faces = [[1, 0, 2, 1], [0, 1, 3, 2], [0, 3, 2, 3], [1, 2, 3, 4]]\r\n        this.faceTexts = [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]]\r\n        this.scaleFactor = 1.2\r\n        this.values = 4\r\n        // [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]]  original\r\n        this.d4FaceTexts = [\r\n            [\r\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]], // 1 - 1\r\n                [[], [0, 0, 0], [1, 4, 3], [2, 3, 4], [1, 2, 4], [2, 1, 3]], // 1 - 2\r\n                [[], [0, 0, 0], [2, 4, 1], [3, 1, 4], [2, 3, 4], [3, 2, 1]], // 1 - 3\r\n                [[], [0, 0, 0], [2, 1, 3], [4, 3, 1], [2, 4, 1], [4, 2, 3]]// 1 - 4\r\n            ],\r\n            [\r\n                [[], [0, 0, 0], [1, 4, 3], [2, 3, 4], [1, 2, 4], [2, 1, 3]], // 2 - 1\r\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]], // 2 - 2\r\n                [[], [0, 0, 0], [3, 4, 2], [1, 2, 4], [3, 1, 4], [1, 3, 2]], // 2 - 3\r\n                [[], [0, 0, 0], [4, 2, 3], [1, 3, 2], [4, 1, 2], [1, 4, 3]]// 2 - 4\r\n            ],\r\n            [\r\n                [[], [0, 0, 0], [2, 4, 1], [3, 1, 4], [2, 3, 4], [3, 2, 1]], // 3 - 1\r\n                [[], [0, 0, 0], [3, 4, 2], [1, 2, 4], [3, 1, 4], [1, 3, 2]], // 3 - 2\r\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]], // 3 - 3\r\n                [[], [0, 0, 0], [2, 3, 4], [1, 4, 3], [2, 1, 3], [1, 2, 4]]// 3 - 4\r\n            ],\r\n            [\r\n                [[], [0, 0, 0], [2, 1, 3], [4, 3, 1], [2, 4, 1], [4, 2, 3]], // 4 - 1\r\n                [[], [0, 0, 0], [4, 2, 3], [1, 3, 2], [4, 1, 2], [1, 4, 3]], // 4 - 2\r\n                [[], [0, 0, 0], [2, 3, 4], [1, 4, 3], [2, 1, 3], [1, 2, 4]], // 4 - 3\r\n                [[], [0, 0, 0], [2, 4, 3], [1, 3, 4], [2, 1, 4], [1, 2, 3]]// 4 - 4\r\n            ]\r\n        ]\r\n        // this.faceTexts = this.d4FaceTexts[0];\r\n        // this.updateMaterialsForValue = (diceValue) => {\r\n        //     if (diceValue < 0) diceValue += 4;\r\n        //     this.faceTexts = this.d4FaceTexts[diceValue];\r\n        //     this.object.material = this.getMaterials();\r\n        // };\r\n\r\n        this.shiftUpperValueCustom = (diceValueNew) => {\r\n            // let geometry = this.object.geometry.clone()\r\n            const geometry = this.object.geometry\r\n            const fromValue = this.getUpsideValue()\r\n            this.faceTexts = this.d4FaceTexts[fromValue - 1][diceValueNew - 1]\r\n            this.object.material = this.getMaterials()\r\n            // this.updateMaterialsForValue(diceValueNew - fromValue);\r\n            return geometry\r\n        }\r\n\r\n        this.customTextTextureFunction = function (text, color, backColor) {\r\n            const canvas = document.createElement('canvas')\r\n            const context = canvas.getContext('2d')\r\n            const ts = this.calculateTextureSize(this.size / 2 + this.size * 2) * 2\r\n            canvas.width = canvas.height = ts\r\n            context.font = ts / 5 + 'pt Arial'\r\n            context.fillStyle = backColor\r\n            context.fillRect(0, 0, canvas.width, canvas.height)\r\n            context.textAlign = 'center'\r\n            context.textBaseline = 'middle'\r\n            context.fillStyle = color\r\n            for (const i in text) {\r\n                context.fillText(text[i], canvas.width / 2,\r\n                    canvas.height / 2 - ts * 0.3)\r\n                context.translate(canvas.width / 2, canvas.height / 2)\r\n                context.rotate(Math.PI * 2 / 3)\r\n                context.translate(-canvas.width / 2, -canvas.height / 2)\r\n            }\r\n            const texture = new THREE.Texture(canvas)\r\n            texture.needsUpdate = true\r\n            return texture\r\n        }\r\n        this.mass = 300\r\n        this.inertia = 5\r\n        this.invertUpside = true\r\n\r\n        this.create()\r\n    }\r\n}\r\n\r\nexport class DiceD6 extends DiceObject {\r\n    constructor (options) {\r\n        super(options)\r\n\r\n        this.tab = 0.1\r\n        this.af = Math.PI / 4\r\n        this.chamfer = 0.96\r\n        this.vertices = [[-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],\r\n        [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1]]\r\n        this.faces = [[0, 3, 2, 1, 1], [1, 2, 6, 5, 2], [0, 1, 5, 4, 3],\r\n        [3, 7, 6, 2, 4], [0, 4, 7, 3, 5], [4, 5, 6, 7, 6]]\r\n        this.scaleFactor = 0.9\r\n        this.values = 6\r\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', '6', '7', '8',\r\n            '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\r\n        this.textMargin = 1.0\r\n        this.mass = 300\r\n        this.inertia = 13\r\n\r\n        this.create()\r\n    }\r\n}\r\n\r\nexport class DiceD8 extends DiceObject {\r\n    constructor (options) {\r\n        super(options)\r\n\r\n        this.tab = 0\r\n        this.af = -Math.PI / 4 / 2\r\n        this.chamfer = 0.965\r\n        this.vertices = [[1, 0, 0], [-1, 0, 0], [0, 1, 0], [0, -1, 0], [0, 0, 1], [0, 0, -1]]\r\n        this.faces = [[0, 2, 4, 1], [0, 4, 3, 2], [0, 3, 5, 3], [0, 5, 2, 4], [1, 3, 4, 5],\r\n        [1, 4, 2, 6], [1, 2, 5, 7], [1, 5, 3, 8]]\r\n        this.scaleFactor = 1\r\n        this.values = 8\r\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', '6', '7', '8',\r\n            '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\r\n        this.textMargin = 1.2\r\n        this.mass = 340\r\n        this.inertia = 10\r\n\r\n        this.create()\r\n    }\r\n}\r\n\r\nexport class DiceD10 extends DiceObject {\r\n    constructor (options) {\r\n        super(options)\r\n\r\n        this.tab = 0\r\n        this.af = Math.PI * 6 / 5\r\n        this.chamfer = 0.945\r\n        this.vertices = []\r\n        this.faces = [[5, 7, 11, 0], [4, 2, 10, 1], [1, 3, 11, 2], [0, 8, 10, 3], [7, 9, 11, 4],\r\n        [8, 6, 10, 5], [9, 1, 11, 6], [2, 0, 10, 7], [3, 5, 11, 8], [6, 4, 10, 9],\r\n        [1, 0, 2, -1], [1, 2, 3, -1], [3, 2, 4, -1], [3, 4, 5, -1], [5, 4, 6, -1],\r\n        [5, 6, 7, -1], [7, 6, 8, -1], [7, 8, 9, -1], [9, 8, 0, -1], [9, 0, 1, -1]]\r\n\r\n        for (let i = 0, b = 0; i < 10; ++i, b += Math.PI * 2 / 10) {\r\n            this.vertices.push([Math.cos(b), Math.sin(b), 0.105 * (i % 2 ? 1 : -1)])\r\n        }\r\n        this.vertices.push([0, 0, -1])\r\n        this.vertices.push([0, 0, 1])\r\n\r\n        this.scaleFactor = 0.9\r\n        this.values = 10\r\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', ' 6.', '7', '8',\r\n            ' 9.', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\r\n        this.textMargin = 1.0\r\n        this.mass = 350\r\n        this.inertia = 9\r\n\r\n        this.create()\r\n    }\r\n}\r\n\r\nexport class DiceD12 extends DiceObject {\r\n    constructor (options) {\r\n        super(options)\r\n\r\n        const p = (1 + Math.sqrt(5)) / 2\r\n        const q = 1 / p\r\n\r\n        this.tab = 0.2\r\n        this.af = -Math.PI / 4 / 2\r\n        this.chamfer = 0.968\r\n        this.vertices = [[0, q, p], [0, q, -p], [0, -q, p], [0, -q, -p], [p, 0, q],\r\n        [p, 0, -q], [-p, 0, q], [-p, 0, -q], [q, p, 0], [q, -p, 0], [-q, p, 0],\r\n        [-q, -p, 0], [1, 1, 1], [1, 1, -1], [1, -1, 1], [1, -1, -1], [-1, 1, 1],\r\n        [-1, 1, -1], [-1, -1, 1], [-1, -1, -1]]\r\n        this.faces = [[2, 14, 4, 12, 0, 1], [15, 9, 11, 19, 3, 2], [16, 10, 17, 7, 6, 3], [6, 7, 19, 11, 18, 4],\r\n        [6, 18, 2, 0, 16, 5], [18, 11, 9, 14, 2, 6], [1, 17, 10, 8, 13, 7], [1, 13, 5, 15, 3, 8],\r\n        [13, 8, 12, 4, 5, 9], [5, 4, 14, 9, 15, 10], [0, 12, 8, 10, 16, 11], [3, 19, 7, 17, 1, 12]]\r\n        this.scaleFactor = 0.9\r\n        this.values = 12\r\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', ' 6.', '7', '8',\r\n            ' 9.', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\r\n        this.textMargin = 1.0\r\n        this.mass = 350\r\n        this.inertia = 8\r\n\r\n        this.create()\r\n    }\r\n}\r\n\r\nexport class DiceD20 extends DiceObject {\r\n    constructor (options) {\r\n        super(options)\r\n\r\n        const t = (1 + Math.sqrt(5)) / 2\r\n\r\n        this.tab = -0.2\r\n        this.af = -Math.PI / 4 / 2\r\n        this.chamfer = 0.955\r\n        this.vertices = [[-1, t, 0], [1, t, 0], [-1, -t, 0], [1, -t, 0],\r\n        [0, -1, t], [0, 1, t], [0, -1, -t], [0, 1, -t],\r\n        [t, 0, -1], [t, 0, 1], [-t, 0, -1], [-t, 0, 1]]\r\n        this.faces = [[0, 11, 5, 1], [0, 5, 1, 2], [0, 1, 7, 3], [0, 7, 10, 4], [0, 10, 11, 5],\r\n        [1, 5, 9, 6], [5, 11, 4, 7], [11, 10, 2, 8], [10, 7, 6, 9], [7, 1, 8, 10],\r\n        [3, 9, 4, 11], [3, 4, 2, 12], [3, 2, 6, 13], [3, 6, 8, 14], [3, 8, 9, 15],\r\n        [4, 9, 5, 16], [2, 4, 11, 17], [6, 2, 10, 18], [8, 6, 7, 19], [9, 8, 1, 20]]\r\n        this.scaleFactor = 1\r\n        this.values = 20\r\n        this.faceTexts = [' ', '0', '1', '2', '3', '4', '5', ' 6.', '7', '8',\r\n            ' 9.', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\r\n        this.textMargin = 1.0\r\n        this.mass = 400\r\n        this.inertia = 6\r\n\r\n        this.create()\r\n    }\r\n}\r\n\r\n// ---------------------------------------------//\r\n\r\nexport const DiceManager = new DiceManagerClass()\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define(function () {\r\n        return {\r\n            DiceManager: DiceManager,\r\n            DiceD4: DiceD4,\r\n            DiceD6: DiceD6,\r\n            DiceD8: DiceD8,\r\n            DiceD10: DiceD10,\r\n            DiceD12: DiceD12,\r\n            DiceD20: DiceD20\r\n        }\r\n    })\r\n} else if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n    module.exports = {\r\n        DiceManager: DiceManager,\r\n        DiceD4: DiceD4,\r\n        DiceD6: DiceD6,\r\n        DiceD8: DiceD8,\r\n        DiceD10: DiceD10,\r\n        DiceD12: DiceD12,\r\n        DiceD20: DiceD20\r\n    }\r\n} else {\r\n    window.Dice = {\r\n        DiceManager: DiceManager,\r\n        DiceD4: DiceD4,\r\n        DiceD6: DiceD6,\r\n        DiceD8: DiceD8,\r\n        DiceD10: DiceD10,\r\n        DiceD12: DiceD12,\r\n        DiceD20: DiceD20\r\n    }\r\n}\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".animation[data-v-681e7a9a]{width:100%;max-width:1200px;height:350px;z-index:3}.animation[data-v-681e7a9a] canvas{z-index:3;width:100%!important;height:auto!important}.message-container[data-v-681e7a9a]{position:relative;height:0;z-index:2}.message-container .message[data-v-681e7a9a]{position:absolute;top:5px;left:50%;transform:translateX(-50%)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./packages/dice-3d/resources/js/pages/game.vue\"],\"names\":[],\"mappings\":\"AA8hBA,4BACE,UAAA,CACA,gBAAA,CACA,YAAA,CACA,SA7hBF,CA8hBE,mCACE,SAAA,CACA,oBAAA,CACA,qBA5hBJ,CA+hBA,oCACE,iBAAA,CACA,QAAA,CACA,SA5hBF,CA6hBE,6CACE,iBAAA,CACA,OAAA,CACA,QAAA,CACA,0BA3hBJ\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.animation {\\n  width:100%;\\n  max-width:1200px;\\n  height:350px;\\n  z-index: 3;\\n  &::v-deep canvas {\\n    z-index: 3;\\n    width: 100% !important;\\n    height: auto !important;\\n  }\\n}\\n.message-container {\\n  position:relative;\\n  height:0;\\n  z-index:2;\\n  .message {\\n    position:absolute;\\n    top:5px;\\n    left:50%;\\n    transform: translateX(-50%);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".scale-enter[data-v-301c9fc3],.scale-leave-to[data-v-301c9fc3]{transform:scale(0);opacity:1}.scale-enter-active[data-v-301c9fc3],.scale-leave-active[data-v-301c9fc3]{transition:all .3s}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/components/Games/GameMessage.vue\"],\"names\":[],\"mappings\":\"AA0BA,+DACE,kBAAA,CACA,SAzBF,CA4BA,0EACE,kBAzBF\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.scale-enter, .scale-leave-to {\\n  transform: scale(0);\\n  opacity: 1;\\n}\\n\\n.scale-enter-active, .scale-leave-active {\\n  transition: all 0.3s;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".bet-input[data-v-f7f27b18]{max-width:250px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/components/Games/PlayControls.vue\"],\"names\":[],\"mappings\":\"AAugBA,4BACE,eAtgBF\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.bet-input {\\r\\n  max-width: 250px;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export default __webpack_public_path__ + \"audio/common/click.wav\";","<template>\n  <transition name=\"scale\">\n    <v-alert\n      v-if=\"message\"\n      dense\n      outlined\n      text\n      color=\"primary\"\n    >\n      {{ message }}\n    </v-alert>\n  </transition>\n</template>\n\n<script>\nexport default {\n  props: {\n    message: {\n      required: true,\n      validator: value => typeof value === 'string' || value === null\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.scale-enter, .scale-leave-to {\n  transform: scale(0);\n  opacity: 1;\n}\n\n.scale-enter-active, .scale-leave-active {\n  transition: all 0.3s;\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameMessage.vue?vue&type=script&lang=js&\"","<template>\r\n  <v-form ref=\"form\" v-model=\"formIsValid\" @submit.prevent=\"play\">\r\n    <div v-if=\"autoPlaySupport\" class=\"d-flex justify-center\">\r\n      <v-btn-toggle\r\n        v-model=\"autoPlayEnabled\"\r\n        active-class=\"primary--text\"\r\n        mandatory\r\n        rounded\r\n        group\r\n        class=\"align-self-center mb-3\"\r\n      >\r\n        <v-btn\r\n          :disabled=\"playing || autoPlayInProgress\"\r\n          class=\"mx-1\"\r\n          small\r\n          :value=\"false\"\r\n        >\r\n          {{ $t('Manual') }}\r\n        </v-btn>\r\n        <v-btn\r\n          :disabled=\"playing || autoPlayInProgress\"\r\n          class=\"mx-1\"\r\n          small\r\n          :value=\"true\"\r\n        >\r\n          {{ $t('Auto') }}\r\n        </v-btn>\r\n      </v-btn-toggle>\r\n      <v-dialog\r\n        v-model=\"autoPlaySettingsDialog\"\r\n        persistent\r\n        max-width=\"600px\"\r\n      >\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n          <v-btn\r\n            icon\r\n            color=\"primary\"\r\n            :disabled=\"!autoPlayEnabled || playing || autoPlayInProgress\"\r\n            v-bind=\"attrs\"\r\n            v-on=\"on\"\r\n          >\r\n            <v-icon>mdi-cog</v-icon>\r\n          </v-btn>\r\n        </template>\r\n        <v-card>\r\n          <v-card-title class=\"headline my-5\">\r\n            {{ $t('Auto play settings') }}\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-text-field\r\n              v-model.number=\"autoPlay.onLoss.amount\"\r\n              dense\r\n              outlined\r\n              class=\"text-center\"\r\n              :label=\"$t('On loss')\"\r\n              :rules=\"[validationInteger]\"\r\n              :readonly=\"autoPlay.onLoss.reset\"\r\n              :suffix=\"$t('credits')\"\r\n            >\r\n              <template v-slot:prepend-inner>\r\n                <v-btn-toggle\r\n                  v-model=\"autoPlay.onLoss.reset\"\r\n                  active-class=\"primary--text\"\r\n                  mandatory\r\n                  rounded\r\n                  group\r\n                  class=\"align-self-center\"\r\n                >\r\n                  <v-btn :value=\"true\" small>\r\n                    {{ $t('Reset to base') }}\r\n                  </v-btn>\r\n                  <v-btn :value=\"false\" small>\r\n                    {{ $t('Change by') }}\r\n                  </v-btn>\r\n                </v-btn-toggle>\r\n              </template>\r\n            </v-text-field>\r\n            <v-text-field\r\n              v-model.number=\"autoPlay.onWin.amount\"\r\n              dense\r\n              outlined\r\n              class=\"text-center\"\r\n              :label=\"$t('On win')\"\r\n              :rules=\"[validationInteger]\"\r\n              :readonly=\"autoPlay.onWin.reset\"\r\n              :suffix=\"$t('credits')\"\r\n            >\r\n              <template v-slot:prepend-inner>\r\n                <v-btn-toggle\r\n                  v-model=\"autoPlay.onWin.reset\"\r\n                  active-class=\"primary--text\"\r\n                  mandatory\r\n                  rounded\r\n                  group\r\n                  class=\"align-self-center\"\r\n                >\r\n                  <v-btn :value=\"true\" small>\r\n                    {{ $t('Reset to base') }}\r\n                  </v-btn>\r\n                  <v-btn :value=\"false\" small>\r\n                    {{ $t('Change by') }}\r\n                  </v-btn>\r\n                </v-btn-toggle>\r\n              </template>\r\n            </v-text-field>\r\n            <v-text-field\r\n              v-model.number=\"autoPlay.maxBetsCount\"\r\n              dense\r\n              outlined\r\n              class=\"text-center\"\r\n              :label=\"$t('Number of games')\"\r\n              :rules=\"[validationNonNegativeInteger]\"\r\n            />\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <v-text-field\r\n                  v-model.number=\"autoPlay.minBet\"\r\n                  dense\r\n                  outlined\r\n                  class=\"text-center\"\r\n                  :label=\"$t('Min bet')\"\r\n                  :suffix=\"$t('credits')\"\r\n                  :rules=\"[validationNonNegativeInteger]\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <v-text-field\r\n                  v-model.number=\"autoPlay.maxBet\"\r\n                  dense\r\n                  outlined\r\n                  class=\"text-center\"\r\n                  :label=\"$t('Max bet')\"\r\n                  :suffix=\"$t('credits')\"\r\n                  :rules=\"[validationNonNegativeInteger]\"\r\n                />\r\n              </v-col>\r\n            </v-row>\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <v-text-field\r\n                  v-model.number=\"autoPlay.minBalance\"\r\n                  dense\r\n                  outlined\r\n                  :prefix=\"$t('less than')\"\r\n                  class=\"text-center\"\r\n                  :label=\"$t('Stop if balance is')\"\r\n                  :rules=\"[validationNonNegativeInteger]\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <v-text-field\r\n                  v-model.number=\"autoPlay.maxBalance\"\r\n                  dense\r\n                  outlined\r\n                  :prefix=\"$t('greater than')\"\r\n                  class=\"text-center\"\r\n                  :label=\"$t('Stop if balance is')\"\r\n                  :rules=\"[validationNonNegativeInteger]\"\r\n                />\r\n              </v-col>\r\n            </v-row>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <v-spacer />\r\n            <v-btn\r\n              color=\"primary\"\r\n              @click=\"autoPlaySettingsDialog = false\"\r\n            >\r\n              {{ $t('Apply') }}\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n      <v-dialog\r\n        v-model=\"autoPlayHistoryDialog\"\r\n        persistent\r\n        max-width=\"600px\"\r\n      >\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n          <v-btn\r\n            icon\r\n            color=\"primary\"\r\n            :disabled=\"!autoPlayEnabled || playing || autoPlayInProgress\"\r\n            v-bind=\"attrs\"\r\n            v-on=\"on\"\r\n          >\r\n            <v-icon>mdi-poll</v-icon>\r\n          </v-btn>\r\n        </template>\r\n        <v-card>\r\n          <v-card-title class=\"headline my-5\">\r\n            {{ $t('Auto play history') }}\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-simple-table v-if=\"autoPlay.games.length\" dense fixed-header>\r\n              <template v-slot:default>\r\n                <thead>\r\n                  <tr>\r\n                    <th class=\"text-left\">\r\n                      #\r\n                    </th>\r\n                    <th class=\"text-right\">\r\n                      {{ $t('Bet') }}\r\n                    </th>\r\n                    <th class=\"text-right\">\r\n                      {{ $t('Win') }}\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(game, i) in autoPlay.games\" :key=\"i\">\r\n                    <td class=\"text-left\">\r\n                      {{ ++i }}\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      {{ game.bet }}\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      {{ game.win }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n                <tfoot>\r\n                  <tr>\r\n                    <th colspan=\"2\" class=\"text-right\">\r\n                      {{ $t('Total net win') }}\r\n                    </th>\r\n                    <th class=\"text-right\" :class=\"autoPlayNetResult > 0 ? 'green--text' : 'error--text'\">\r\n                      {{ autoPlayNetResult.toFixed(2) }}\r\n                    </th>\r\n                  </tr>\r\n                </tfoot>\r\n              </template>\r\n            </v-simple-table>\r\n            <p v-else>\r\n              {{ $t('No games played in the auto mode.') }}\r\n            </p>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <v-spacer />\r\n            <v-btn\r\n              color=\"primary\"\r\n              @click=\"autoPlayHistoryDialog = false\"\r\n            >\r\n              {{ $t('Close') }}\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n    <div class=\"d-flex justify-center flex-wrap mt-3\">\r\n      <slot name=\"before-bet-input\" />\r\n      <v-text-field\r\n        v-model.number=\"bet\"\r\n        dense\r\n        outlined\r\n        :full-width=\"false\"\r\n        class=\"bet-input text-center\"\r\n        :label=\"betLabel || $t('Bet')\"\r\n        :disabled=\"playing\"\r\n        :rules=\"[validationInteger, v => validationMin(v, minBet), v => typeof account !== 'undefined' && validationMax(v, Math.min(Math.floor(account.balance), maxBet))]\"\r\n        prepend-inner-icon=\"mdi-minus\"\r\n        append-icon=\"mdi-plus\"\r\n        @click:prepend-inner=\"decreaseBet\"\r\n        @click:append=\"increaseBet\"\r\n      >\r\n        <template v-slot:prepend-inner>\r\n          <v-btn small text icon color=\"primary\" @click=\"bet = minBet\">\r\n            <v-icon small>\r\n              mdi-arrow-down\r\n            </v-icon>\r\n          </v-btn>\r\n          <v-btn small text icon color=\"primary\" @click=\"decreaseBet\">\r\n            <v-icon small>\r\n              mdi-minus\r\n            </v-icon>\r\n          </v-btn>\r\n        </template>\r\n        <template v-slot:append>\r\n          <v-btn small text icon color=\"primary\" @click=\"increaseBet\">\r\n            <v-icon small>\r\n              mdi-plus\r\n            </v-icon>\r\n          </v-btn>\r\n          <v-btn small text icon color=\"primary\" @click=\"bet = maxBet\">\r\n            <v-icon small>\r\n              mdi-arrow-up\r\n            </v-icon>\r\n          </v-btn>\r\n        </template>\r\n      </v-text-field>\r\n      <slot name=\"after-bet-input\" />\r\n      <v-btn\r\n        v-if=\"autoPlayEnabled\"\r\n        color=\"primary\"\r\n        :disabled=\"!autoPlayInProgress\"\r\n        class=\"ml-2\"\r\n        outlined\r\n        icon\r\n        tile\r\n        @click=\"stopAutoPlay\"\r\n      >\r\n        <v-icon>mdi-stop</v-icon>\r\n      </v-btn>\r\n      <v-btn\r\n        type=\"submit\"\r\n        color=\"primary\"\r\n        :loading=\"loading\"\r\n        :disabled=\"disabled || !formIsValid || isPlayDisabled || autoPlayInProgress\"\r\n        class=\"ml-2\"\r\n      >\r\n        {{ playLabel || $t('Play') }}\r\n      </v-btn>\r\n      <slot name=\"after-play-button\" />\r\n    </div>\r\n  </v-form>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { isInteger } from '~/plugins/utils'\r\nimport FormMixin from '~/mixins/Form'\r\nimport GameMixin from '~/mixins/Game'\r\nimport SoundMixin from '~/mixins/Sound'\r\nimport clickSound from '~/../audio/common/click.wav'\r\n\r\nexport default {\r\n  mixins: [FormMixin, GameMixin, SoundMixin],\r\n\r\n  props: {\r\n    betLabel: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    playLabel: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    playing: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    },\r\n    provable: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: true\r\n    },\r\n    autoPlaySupport: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    },\r\n    autoPlayInterval: {\r\n      type: Number,\r\n      required: false,\r\n      default: 1\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      bet: null,\r\n      autoPlay: {\r\n        baseBet: 0,\r\n        onWin: {\r\n          reset: true,\r\n          amount: 0\r\n        },\r\n        onLoss: {\r\n          reset: true,\r\n          amount: 0\r\n        },\r\n        games: [],\r\n        minBet: 0,\r\n        maxBet: 0,\r\n        betsCount: 0,\r\n        maxBetsCount: 0,\r\n        maxBalance: 0,\r\n        minBalance: 0,\r\n        winsCount: 0,\r\n        lossesCount: 0\r\n      },\r\n      autoPlayInProgress: false,\r\n      autoPlayEnabled: false,\r\n      autoPlaySettingsDialog: false,\r\n      autoPlayHistoryDialog: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('auth', ['account']),\r\n    defaultBet () {\r\n      return parseInt(this.config.default_bet_amount, 10)\r\n    },\r\n    minBet () {\r\n      return parseInt(this.config.min_bet, 10)\r\n    },\r\n    maxBet () {\r\n      return parseInt(this.config.max_bet, 10)\r\n    },\r\n    betStep () {\r\n      return parseInt(this.config.bet_change_amount, 10)\r\n    },\r\n    isPlayDisabled () {\r\n      return (this.provable && !this.provablyFairGame.hash) || this.playing || typeof this.account === 'undefined' || this.bet > this.account.balance\r\n    },\r\n    autoPlayNetResult () {\r\n      return this.autoPlay.games.reduce((a, game) => a + game.win - game.bet, 0)\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    bet (bet, oldBet) {\r\n      this.$emit('bet-change', isInteger(bet) ? bet : 0)\r\n    }\r\n  },\r\n\r\n  created () {\r\n    // it's important to wait until next tick to ensure config computed property is updated\r\n    // after switching from one game page to another.\r\n    this.$nextTick(() => {\r\n      this.bet = this.defaultBet\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    play () {\r\n      this.sound(clickSound)\r\n\r\n      if (this.autoPlaySupport && this.autoPlayEnabled && !this.autoPlayInProgress) {\r\n        this.autoPlayInProgress = true\r\n        this.autoPlay.baseBet = this.bet\r\n        this.autoPlay.betsCount = 0\r\n        this.autoPlay.winsCount = 0\r\n        this.autoPlay.lossesCount = 0\r\n        this.autoPlay.games = []\r\n      }\r\n\r\n      this.$emit('play', this.bet)\r\n    },\r\n    decreaseBet () {\r\n      this.sound(clickSound)\r\n      const bet = this.bet - this.betStep\r\n      this.bet = Math.max(this.minBet, bet)\r\n    },\r\n    increaseBet () {\r\n      this.sound(clickSound)\r\n      const bet = this.bet + this.betStep\r\n      this.bet = Math.min(this.maxBet, bet)\r\n    },\r\n    onGameCompleted (game) {\r\n      if (this.autoPlaySupport) {\r\n        const isWin = game.win > game.bet\r\n        this.autoPlay.betsCount++\r\n        this.autoPlay.games.push({ bet: game.bet, win: game.win })\r\n\r\n        // win\r\n        if (isWin) {\r\n          this.autoPlay.winsCount++\r\n\r\n          if (this.autoPlay.onWin.reset) {\r\n            this.setBet(this.autoPlay.baseBet)\r\n          } else {\r\n            this.setBet(this.bet + this.autoPlay.onWin.amount)\r\n          }\r\n          // loss\r\n        } else {\r\n          this.autoPlay.lossesCount++\r\n\r\n          if (this.autoPlay.onLoss.reset) {\r\n            this.setBet(this.autoPlay.baseBet)\r\n          } else {\r\n            this.setBet(this.bet + this.autoPlay.onLoss.amount)\r\n          }\r\n        }\r\n\r\n        if (this.bet > this.account.balance ||\r\n          (this.autoPlay.minBalance > 0 && this.account.balance < this.autoPlay.minBalance) ||\r\n          (this.autoPlay.maxBalance > 0 && this.account.balance > this.autoPlay.maxBalance) ||\r\n          (this.autoPlay.maxBetsCount > 0 && this.autoPlay.betsCount >= this.autoPlay.maxBetsCount)) {\r\n          this.stopAutoPlay()\r\n        }\r\n\r\n        setTimeout(() => {\r\n          if (this.autoPlayInProgress) {\r\n            this.play()\r\n          } else {\r\n            this.stopAutoPlay()\r\n          }\r\n        }, parseInt(this.autoPlayInterval) * 1000)\r\n      }\r\n    },\r\n    setBet (value) {\r\n      const minValues = this.autoPlay.maxBet > 0\r\n        ? [value, this.maxBet, this.autoPlay.maxBet]\r\n        : [value, this.maxBet]\r\n      const maxValues = this.autoPlay.minBet > 0\r\n        ? [this.minBet, this.autoPlay.minBet]\r\n        : [this.minBet]\r\n      this.bet = Math.max(...[Math.min(...minValues), ...maxValues])\r\n    },\r\n    stopAutoPlay () {\r\n      this.autoPlayInProgress = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.bet-input {\r\n  max-width: 250px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayControls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayControls.vue?vue&type=script&lang=js&\"","<script>\r\nimport { config } from '~/plugins/config'\r\nimport { route } from '~/plugins/route'\r\nimport { preloadImages } from '~/plugins/utils'\r\n\r\nexport default {\r\n  computed: {\r\n    gamePackageId () {\r\n      return this.$route.params.game\r\n    },\r\n    gameSlug () {\r\n      return this.$route.params.slug\r\n    },\r\n    config () {\r\n      return this.gameSlug\r\n        ? config(this.gamePackageId).variations.find(o => o.slug === this.gameSlug)\r\n        : config(this.gamePackageId)\r\n    },\r\n    provablyFairGame () {\r\n      return this.$store.getters['provably-fair/get'](this.gamePackageId) || {}\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getRoute (action) {\r\n      return route(`games.${this.gamePackageId}.${action}`)\r\n    },\r\n    loadCardDeck () {\r\n      return preloadImages(window.assets.deck)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[1]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameMessage.vue?vue&type=style&index=0&id=301c9fc3&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[1]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayControls.vue?vue&type=style&index=0&id=f7f27b18&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"scale\"}},[(_vm.message)?_c('v-alert',{attrs:{\"dense\":\"\",\"outlined\":\"\",\"text\":\"\",\"color\":\"primary\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.message)+\"\\n  \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{ref:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.play($event)}},model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[(_vm.autoPlaySupport)?_c('div',{staticClass:\"d-flex justify-center\"},[_c('v-btn-toggle',{staticClass:\"align-self-center mb-3\",attrs:{\"active-class\":\"primary--text\",\"mandatory\":\"\",\"rounded\":\"\",\"group\":\"\"},model:{value:(_vm.autoPlayEnabled),callback:function ($$v) {_vm.autoPlayEnabled=$$v},expression:\"autoPlayEnabled\"}},[_c('v-btn',{staticClass:\"mx-1\",attrs:{\"disabled\":_vm.playing || _vm.autoPlayInProgress,\"small\":\"\",\"value\":false}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('Manual'))+\"\\n      \")]),_vm._v(\" \"),_c('v-btn',{staticClass:\"mx-1\",attrs:{\"disabled\":_vm.playing || _vm.autoPlayInProgress,\"small\":\"\",\"value\":true}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('Auto'))+\"\\n      \")])],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\",\"color\":\"primary\",\"disabled\":!_vm.autoPlayEnabled || _vm.playing || _vm.autoPlayInProgress}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-cog\")])],1)]}}],null,false,3358863509),model:{value:(_vm.autoPlaySettingsDialog),callback:function ($$v) {_vm.autoPlaySettingsDialog=$$v},expression:\"autoPlaySettingsDialog\"}},[_vm._v(\" \"),_c('v-card',[_c('v-card-title',{staticClass:\"headline my-5\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('Auto play settings'))+\"\\n        \")]),_vm._v(\" \"),_c('v-card-text',[_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":_vm.$t('On loss'),\"rules\":[_vm.validationInteger],\"readonly\":_vm.autoPlay.onLoss.reset,\"suffix\":_vm.$t('credits')},scopedSlots:_vm._u([{key:\"prepend-inner\",fn:function(){return [_c('v-btn-toggle',{staticClass:\"align-self-center\",attrs:{\"active-class\":\"primary--text\",\"mandatory\":\"\",\"rounded\":\"\",\"group\":\"\"},model:{value:(_vm.autoPlay.onLoss.reset),callback:function ($$v) {_vm.$set(_vm.autoPlay.onLoss, \"reset\", $$v)},expression:\"autoPlay.onLoss.reset\"}},[_c('v-btn',{attrs:{\"value\":true,\"small\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Reset to base'))+\"\\n                \")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"value\":false,\"small\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Change by'))+\"\\n                \")])],1)]},proxy:true}],null,false,3331114620),model:{value:(_vm.autoPlay.onLoss.amount),callback:function ($$v) {_vm.$set(_vm.autoPlay.onLoss, \"amount\", _vm._n($$v))},expression:\"autoPlay.onLoss.amount\"}}),_vm._v(\" \"),_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":_vm.$t('On win'),\"rules\":[_vm.validationInteger],\"readonly\":_vm.autoPlay.onWin.reset,\"suffix\":_vm.$t('credits')},scopedSlots:_vm._u([{key:\"prepend-inner\",fn:function(){return [_c('v-btn-toggle',{staticClass:\"align-self-center\",attrs:{\"active-class\":\"primary--text\",\"mandatory\":\"\",\"rounded\":\"\",\"group\":\"\"},model:{value:(_vm.autoPlay.onWin.reset),callback:function ($$v) {_vm.$set(_vm.autoPlay.onWin, \"reset\", $$v)},expression:\"autoPlay.onWin.reset\"}},[_c('v-btn',{attrs:{\"value\":true,\"small\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Reset to base'))+\"\\n                \")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"value\":false,\"small\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Change by'))+\"\\n                \")])],1)]},proxy:true}],null,false,2613860143),model:{value:(_vm.autoPlay.onWin.amount),callback:function ($$v) {_vm.$set(_vm.autoPlay.onWin, \"amount\", _vm._n($$v))},expression:\"autoPlay.onWin.amount\"}}),_vm._v(\" \"),_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":_vm.$t('Number of games'),\"rules\":[_vm.validationNonNegativeInteger]},model:{value:(_vm.autoPlay.maxBetsCount),callback:function ($$v) {_vm.$set(_vm.autoPlay, \"maxBetsCount\", _vm._n($$v))},expression:\"autoPlay.maxBetsCount\"}}),_vm._v(\" \"),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":_vm.$t('Min bet'),\"suffix\":_vm.$t('credits'),\"rules\":[_vm.validationNonNegativeInteger]},model:{value:(_vm.autoPlay.minBet),callback:function ($$v) {_vm.$set(_vm.autoPlay, \"minBet\", _vm._n($$v))},expression:\"autoPlay.minBet\"}})],1),_vm._v(\" \"),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":_vm.$t('Max bet'),\"suffix\":_vm.$t('credits'),\"rules\":[_vm.validationNonNegativeInteger]},model:{value:(_vm.autoPlay.maxBet),callback:function ($$v) {_vm.$set(_vm.autoPlay, \"maxBet\", _vm._n($$v))},expression:\"autoPlay.maxBet\"}})],1)],1),_vm._v(\" \"),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"prefix\":_vm.$t('less than'),\"label\":_vm.$t('Stop if balance is'),\"rules\":[_vm.validationNonNegativeInteger]},model:{value:(_vm.autoPlay.minBalance),callback:function ($$v) {_vm.$set(_vm.autoPlay, \"minBalance\", _vm._n($$v))},expression:\"autoPlay.minBalance\"}})],1),_vm._v(\" \"),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"prefix\":_vm.$t('greater than'),\"label\":_vm.$t('Stop if balance is'),\"rules\":[_vm.validationNonNegativeInteger]},model:{value:(_vm.autoPlay.maxBalance),callback:function ($$v) {_vm.$set(_vm.autoPlay, \"maxBalance\", _vm._n($$v))},expression:\"autoPlay.maxBalance\"}})],1)],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){_vm.autoPlaySettingsDialog = false}}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('Apply'))+\"\\n          \")])],1)],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\",\"color\":\"primary\",\"disabled\":!_vm.autoPlayEnabled || _vm.playing || _vm.autoPlayInProgress}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-poll\")])],1)]}}],null,false,2222554209),model:{value:(_vm.autoPlayHistoryDialog),callback:function ($$v) {_vm.autoPlayHistoryDialog=$$v},expression:\"autoPlayHistoryDialog\"}},[_vm._v(\" \"),_c('v-card',[_c('v-card-title',{staticClass:\"headline my-5\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('Auto play history'))+\"\\n        \")]),_vm._v(\" \"),_c('v-card-text',[(_vm.autoPlay.games.length)?_c('v-simple-table',{attrs:{\"dense\":\"\",\"fixed-header\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"\\n                    #\\n                  \")]),_vm._v(\" \"),_c('th',{staticClass:\"text-right\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('Bet'))+\"\\n                  \")]),_vm._v(\" \"),_c('th',{staticClass:\"text-right\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('Win'))+\"\\n                  \")])])]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.autoPlay.games),function(game,i){return _c('tr',{key:i},[_c('td',{staticClass:\"text-left\"},[_vm._v(\"\\n                    \"+_vm._s(++i)+\"\\n                  \")]),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[_vm._v(\"\\n                    \"+_vm._s(game.bet)+\"\\n                  \")]),_vm._v(\" \"),_c('td',{staticClass:\"text-right\"},[_vm._v(\"\\n                    \"+_vm._s(game.win)+\"\\n                  \")])])}),0),_vm._v(\" \"),_c('tfoot',[_c('tr',[_c('th',{staticClass:\"text-right\",attrs:{\"colspan\":\"2\"}},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('Total net win'))+\"\\n                  \")]),_vm._v(\" \"),_c('th',{staticClass:\"text-right\",class:_vm.autoPlayNetResult > 0 ? 'green--text' : 'error--text'},[_vm._v(\"\\n                    \"+_vm._s(_vm.autoPlayNetResult.toFixed(2))+\"\\n                  \")])])])]},proxy:true}],null,false,4084813946)}):_c('p',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('No games played in the auto mode.'))+\"\\n          \")])],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){_vm.autoPlayHistoryDialog = false}}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('Close'))+\"\\n          \")])],1)],1)],1)],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-center flex-wrap mt-3\"},[_vm._t(\"before-bet-input\"),_vm._v(\" \"),_c('v-text-field',{staticClass:\"bet-input text-center\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"full-width\":false,\"label\":_vm.betLabel || _vm.$t('Bet'),\"disabled\":_vm.playing,\"rules\":[_vm.validationInteger, function (v) { return _vm.validationMin(v, _vm.minBet); }, function (v) { return typeof _vm.account !== 'undefined' && _vm.validationMax(v, Math.min(Math.floor(_vm.account.balance), _vm.maxBet)); }],\"prepend-inner-icon\":\"mdi-minus\",\"append-icon\":\"mdi-plus\"},on:{\"click:prepend-inner\":_vm.decreaseBet,\"click:append\":_vm.increaseBet},scopedSlots:_vm._u([{key:\"prepend-inner\",fn:function(){return [_c('v-btn',{attrs:{\"small\":\"\",\"text\":\"\",\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.bet = _vm.minBet}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"\\n            mdi-arrow-down\\n          \")])],1),_vm._v(\" \"),_c('v-btn',{attrs:{\"small\":\"\",\"text\":\"\",\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.decreaseBet}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"\\n            mdi-minus\\n          \")])],1)]},proxy:true},{key:\"append\",fn:function(){return [_c('v-btn',{attrs:{\"small\":\"\",\"text\":\"\",\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.increaseBet}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"\\n            mdi-plus\\n          \")])],1),_vm._v(\" \"),_c('v-btn',{attrs:{\"small\":\"\",\"text\":\"\",\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.bet = _vm.maxBet}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"\\n            mdi-arrow-up\\n          \")])],1)]},proxy:true}]),model:{value:(_vm.bet),callback:function ($$v) {_vm.bet=_vm._n($$v)},expression:\"bet\"}}),_vm._v(\" \"),_vm._t(\"after-bet-input\"),_vm._v(\" \"),(_vm.autoPlayEnabled)?_c('v-btn',{staticClass:\"ml-2\",attrs:{\"color\":\"primary\",\"disabled\":!_vm.autoPlayInProgress,\"outlined\":\"\",\"icon\":\"\",\"tile\":\"\"},on:{\"click\":_vm.stopAutoPlay}},[_c('v-icon',[_vm._v(\"mdi-stop\")])],1):_vm._e(),_vm._v(\" \"),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"type\":\"submit\",\"color\":\"primary\",\"loading\":_vm.loading,\"disabled\":_vm.disabled || !_vm.formIsValid || _vm.isPlayDisabled || _vm.autoPlayInProgress}},[_vm._v(\"\\n      \"+_vm._s(_vm.playLabel || _vm.$t('Play'))+\"\\n    \")]),_vm._v(\" \"),_vm._t(\"after-play-button\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column fill-height py-3\"},[_c('div',{staticClass:\"message-container\"},[_c('game-message',{staticClass:\"message\",attrs:{\"message\":_vm.message}})],1),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-center fill-height align-center\"},[_c('div',{ref:\"ThreeJS\",staticClass:\"animation\",attrs:{\"click\":_vm.play}})]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-center flex-column\"},[_c('v-slider',{staticClass:\"px-5\",attrs:{\"thumb-label\":\"always\",\"min\":_vm.minRefNumber,\"max\":_vm.maxRefNumber,\"step\":1,\"track-color\":_vm.sliderTrackColor,\"track-fill-color\":_vm.sliderFillColor},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('v-icon',{on:{\"click\":_vm.decrementRefNumber}},[_vm._v(\"\\n          mdi-minus\\n        \")])]},proxy:true},{key:\"append\",fn:function(){return [_c('v-icon',{on:{\"click\":_vm.incrementRefNumber}},[_vm._v(\"\\n          mdi-plus\\n        \")])]},proxy:true}]),model:{value:(_vm.refNumber),callback:function ($$v) {_vm.refNumber=$$v},expression:\"refNumber\"}}),_vm._v(\" \"),_c('div',{staticClass:\"align-self-center\"},[_c('v-form',{staticClass:\"d-md-flex\",model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center flex-grow-0 mr-0 mr-lg-2\",attrs:{\"value\":_vm.winChance,\"dense\":\"\",\"outlined\":\"\",\"full-width\":false,\"label\":_vm.$t('Win chance'),\"disabled\":true}})],1),_vm._v(\" \"),_c('v-col',{staticClass:\"pa-0\",attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{staticClass:\"text-center flex-grow-0 ml-0 ml-lg-2\",attrs:{\"value\":_vm.payout,\"dense\":\"\",\"outlined\":\"\",\"full-width\":false,\"label\":_vm.$t('Payout'),\"disabled\":true}})],1)],1)],1),_vm._v(\" \"),_c('v-btn-toggle',{staticClass:\"align-self-center mb-3\",attrs:{\"active-class\":\"primary--text\",\"mandatory\":\"\",\"rounded\":\"\",\"group\":\"\"},model:{value:(_vm.direction),callback:function ($$v) {_vm.direction=$$v},expression:\"direction\"}},[_c('v-btn',{staticClass:\"mx-1\",attrs:{\"disabled\":_vm.playing,\"small\":\"\",\"value\":-1},on:{\"click\":function($event){return _vm.sound(_vm.clickSound)}}},[_vm._v(\"\\n        \"+_vm._s(_vm.rollLessText)+\"\\n      \")]),_vm._v(\" \"),_c('v-btn',{staticClass:\"mx-1\",attrs:{\"disabled\":_vm.playing,\"small\":\"\",\"value\":1},on:{\"click\":function($event){return _vm.sound(_vm.clickSound)}}},[_vm._v(\"\\n        \"+_vm._s(_vm.rollGreaterText)+\"\\n      \")])],1)],1),_vm._v(\" \"),_c('play-controls',{attrs:{\"loading\":_vm.loading,\"playing\":_vm.playing,\"disabled\":!_vm.formIsValid},on:{\"bet-change\":function($event){_vm.bet = $event},\"play\":_vm.play}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default __webpack_public_path__ + \"audio/dice-3d/win.wav\";","export default __webpack_public_path__ + \"audio/dice-3d/roll1.wav\";","export default __webpack_public_path__ + \"audio/dice-3d/roll2.wav\";","export default __webpack_public_path__ + \"audio/dice-3d/lose.wav\";","<template>\n  <div class=\"d-flex flex-column fill-height py-3\">\n    <div class=\"message-container\">\n      <game-message class=\"message\" :message=\"message\" />\n    </div>\n    <div class=\"d-flex justify-center fill-height align-center\">\n      <div ref=\"ThreeJS\" class=\"animation\" :click=\"play\" />\n    </div>\n    <div class=\"d-flex justify-center flex-column\">\n      <v-slider\n        v-model=\"refNumber\"\n        thumb-label=\"always\"\n        :min=\"minRefNumber\"\n        :max=\"maxRefNumber\"\n        :step=\"1\"\n        :track-color=\"sliderTrackColor\"\n        :track-fill-color=\"sliderFillColor\"\n        class=\"px-5\"\n      >\n        <template v-slot:prepend>\n          <v-icon @click=\"decrementRefNumber\">\n            mdi-minus\n          </v-icon>\n        </template>\n        <template v-slot:append>\n          <v-icon @click=\"incrementRefNumber\">\n            mdi-plus\n          </v-icon>\n        </template>\n      </v-slider>\n      <div class=\"align-self-center\">\n        <v-form v-model=\"formIsValid\" class=\"d-md-flex\">\n          <v-col cols=\"12\" md=\"6\" class=\"pa-0\">\n            <v-text-field\n              :value=\"winChance\"\n              dense\n              outlined\n              :full-width=\"false\"\n              class=\"text-center flex-grow-0 mr-0 mr-lg-2\"\n              :label=\"$t('Win chance')\"\n              :disabled=\"true\"\n            />\n          </v-col>\n          <v-col cols=\"12\" md=\"6\" class=\"pa-0\">\n            <v-text-field\n              :value=\"payout\"\n              dense\n              outlined\n              :full-width=\"false\"\n              class=\"text-center flex-grow-0 ml-0 ml-lg-2\"\n              :label=\"$t('Payout')\"\n              :disabled=\"true\"\n            />\n          </v-col>\n        </v-form>\n      </div>\n      <v-btn-toggle\n        v-model=\"direction\"\n        active-class=\"primary--text\"\n        mandatory\n        rounded\n        group\n        class=\"align-self-center mb-3\"\n      >\n        <v-btn\n          :disabled=\"playing\"\n          class=\"mx-1\"\n          small\n          :value=\"-1\"\n          @click=\"sound(clickSound)\"\n        >\n          {{ rollLessText }}\n        </v-btn>\n        <v-btn\n          :disabled=\"playing\"\n          class=\"mx-1\"\n          small\n          :value=\"1\"\n          @click=\"sound(clickSound)\"\n        >\n          {{ rollGreaterText }}\n        </v-btn>\n      </v-btn-toggle>\n    </div>\n    <play-controls :loading=\"loading\" :playing=\"playing\" :disabled=\"!formIsValid\" @bet-change=\"bet = $event\" @play=\"play\" />\n  </div>\n</template>\n\n<script>\nimport * as CANNON from 'cannon'\nimport * as THREE from 'three'\nimport { DiceD4, DiceD6, DiceD8, DiceD10, DiceD12, DiceD20, DiceManager } from 'packages/dice-3d/resources/js/components/dice.js'\nimport axios from 'axios'\nimport { mapState, mapActions } from 'vuex'\nimport { config } from '~/plugins/config'\nimport { decimal } from '~/plugins/format'\nimport FormMixin from '~/mixins/Form'\nimport GameMixin from '~/mixins/Game'\nimport SoundMixin from '~/mixins/Sound'\nimport { round } from '~/plugins/utils'\nimport clickSound from '~/../audio/common/click.wav'\nimport winSound from 'packages/dice-3d/resources/audio/win.wav'\nimport roll1Sound from 'packages/dice-3d/resources/audio/roll1.wav'\nimport roll2Sound from 'packages/dice-3d/resources/audio/roll2.wav'\nimport loseSound from 'packages/dice-3d/resources/audio/lose.wav'\nimport PlayControls from '~/components/Games/PlayControls'\nimport GameMessage from '~/components/Games/GameMessage'\n\nexport default {\n  name: 'Dice3D',\n\n  components: { GameMessage, PlayControls },\n\n  mixins: [FormMixin, GameMixin, SoundMixin],\n\n  data () {\n    return {\n      clickSound,\n      roll1Sound,\n      roll2Sound,\n      formIsValid: true,\n      loading: false,\n      playing: false,\n      refNumber: null,\n      direction: -1,\n      diceFillColor: config('dice-3d.fill_color'),\n      diceFontColor: config('dice-3d.font_color'),\n      bet: parseInt(config('dice-3d.default_bet_amount'), 10),\n      roll: 0,\n      message: null,\n      animation: {}\n    }\n  },\n\n  computed: {\n    ...mapState('auth', ['account']),\n    dices () {\n      return config('dice-3d.dice')\n    },\n    minRoll () {\n      return config('dice-3d.dice').length\n    },\n    maxRoll () {\n      return config('dice-3d.dice').reduce((a, id) => { a += config('dice-3d.dice_types')[id].max; return a }, 0)\n    },\n    rollsRangeLength () {\n      return this.maxRoll - this.minRoll + 1\n    },\n    minRefNumber () {\n      return this.minRoll + 1\n    },\n    maxRefNumber () {\n      return this.maxRoll\n    },\n    houseEdge () {\n      return config('dice-3d.house_edge')\n    },\n    winChance () {\n      const winChance = this.direction === -1\n        ? (this.refNumber - this.minRoll) / this.rollsRangeLength * 100\n        : (this.maxRoll - this.refNumber + 1) / this.rollsRangeLength * 100\n\n      return round(winChance, 2)\n    },\n    payout () {\n      const payout = (100 - this.houseEdge) / this.winChance\n      return round(payout, 4)\n    },\n    rollLessText () {\n      return this.minRoll < this.refNumber - 1\n        ? this.$t('Roll {0} - {1}', [this.minRoll, this.refNumber - 1])\n        : this.$t('Roll {0}', [this.refNumber - 1])\n    },\n    rollGreaterText () {\n      return this.maxRoll > this.refNumber\n        ? this.$t('Roll {0} - {1}', [this.refNumber, this.maxRoll])\n        : this.$t('Roll {0}', [this.refNumber])\n    },\n    sliderTrackColor () {\n      return this.direction === -1 ? 'grey' : 'primary'\n    },\n    sliderFillColor () {\n      return this.direction === -1 ? 'primary' : 'grey'\n    }\n  },\n\n  created () {\n    // trigger change\n    this.refNumber = this.minRoll + Math.floor((this.maxRoll - this.minRoll) / 2)\n  },\n  mounted () {\n    window.dice = this\n    this.animation = {\n      pos: null,\n      velocity: null,\n      container: null,\n      scene: null,\n      camera: null,\n      renderer: null,\n      world: null,\n      floorWidth: 0,\n      floorHeight: 0,\n      width: this.$refs.ThreeJS.offsetWidth,\n      height: this.$refs.ThreeJS.offsetHeight,\n      aspect: this.$refs.ThreeJS.offsetWidth / this.$refs.ThreeJS.offsetHeight,\n      camera_angle: 10,\n      camera_position: 100,\n      near: 0.01,\n      far: 10000,\n      diceValues: [],\n      diceAnimationStep: 0,\n      isThrought: false,\n      dice: [],\n      animate: () => {\n        var i\n        if (this.animation.isThrought) {\n          for (i in this.animation.dice) {\n            if (this.animation.diceValues[i].steps.length > this.animation.diceAnimationStep) this.animation.dice[i].setMeshFrom(this.animation.diceValues[i].steps[this.animation.diceAnimationStep])\n            if (this.animation.diceValues[i].sound.length > this.animation.diceAnimationStep && this.animation.diceValues[i].sound[this.animation.diceAnimationStep] && this.animation.diceValues[i].lastSound < this.animation.diceAnimationStep) {\n              if (this.animation.diceValues[i].lastSound === 0) this.sound(this.roll1Sound)\n              else this.sound(this.roll2Sound)\n              this.animation.diceValues[i].lastSound = this.animation.diceAnimationStep + 5\n            }\n          }\n          this.animation.diceAnimationStep++\n        }\n        this.animation.renderer.render(this.animation.scene, this.animation.camera)\n        requestAnimationFrame(this.animation.animate)\n        if (this.animation.isThrought) {\n          var isFinished = true\n          for (i = 0; i < this.animation.dice.length; i++) isFinished = isFinished && !(this.animation.diceValues[i].steps.length > this.animation.diceAnimationStep)\n          if (isFinished) {\n            this.playing = false\n            this.updateUserAccountBalance(this.animation.result.balance)\n            if (this.animation.result.win > 0) {\n              this.sound(winSound)\n              this.message = this.$t('You rolled') + ' ' + this.roll + ' ' + this.$t('and won') + ' ' + decimal(this.animation.result.win)\n            } else {\n              this.sound(loseSound)\n              this.message = this.$t('You rolled') + ' ' + this.roll\n            }\n            this.animation.isThrought = false\n          }\n        }\n      }\n    }\n    this.animation.scene = new THREE.Scene()\n    this.animation.camera = new THREE.PerspectiveCamera(this.animation.camera_angle, this.animation.aspect, this.animation.near, this.animation.far)\n    this.animation.scene.add(this.animation.camera)\n    this.animation.camera.position.set(0, this.animation.camera_position, 0)\n    this.animation.camera.lookAt(0, 0, 0)\n    this.animation.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })\n    this.animation.renderer.setClearColor(0x000000, 0)\n    this.animation.renderer.setSize(this.animation.width * 2, this.animation.height * 2)\n    this.animation.renderer.shadowMap.enabled = true\n    this.animation.renderer.shadowMap.type = THREE.PCFSoftShadowMap\n    this.animation.container = this.$refs.ThreeJS\n    this.animation.container.appendChild(this.animation.renderer.domElement)\n\n    const ambient = new THREE.AmbientLight('#ffffff', 0.5)\n    this.animation.scene.add(ambient)\n\n    const directionalLight = new THREE.DirectionalLight('#ffffff', 0.2)\n    directionalLight.position.x = -1000\n    directionalLight.position.y = 1000\n    directionalLight.position.z = 1000\n    this.animation.scene.add(directionalLight)\n\n    const light = new THREE.SpotLight(0xefdfd5, 0.5)\n    light.position.y = 200\n    light.target.position.set(0, 0, 0)\n    light.castShadow = true\n    light.shadow.camera.near = 50\n    light.shadow.camera.far = 110\n    light.shadow.mapSize.width = 1024\n    light.shadow.mapSize.height = 1024\n    this.animation.scene.add(light)\n\n    this.animation.floorHeight = 2 * Math.tan(this.animation.camera.fov * Math.PI / 180 / 2) * Math.abs(this.animation.camera.position.y)\n    this.animation.floorWidth = this.animation.floorHeight * this.animation.camera.aspect\n    // var floorMaterial = new THREE.MeshPhongMaterial({ color: '#00aa00', side: THREE.DoubleSide })\n    // var floorGeometry = new THREE.PlaneGeometry(floorWidth * 0.95, floorHeight * 0.95, 10, 10)\n    // var floor = new THREE.Mesh(floorGeometry, floorMaterial)\n    // floor.receiveShadow = true\n    // floor.rotation.x = Math.PI / 2\n    // scene.add(floor)\n    this.animation.world = new CANNON.World()\n    this.animation.world.gravity.set(0, -9.82 * 10, 0)\n    this.animation.world.broadphase = new CANNON.NaiveBroadphase()\n    this.animation.world.solver.iterations = 16\n    DiceManager.setWorld(this.animation.world)\n    // Floor\n    const floorBody = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.floorBodyMaterial })\n    floorBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2)\n    this.animation.world.add(floorBody)\n    // floorBody.addEventListener(\"collide\",() => {\n    //   this.sound(this.clickSound)\n    // })\n    // Walls\n    var barrier\n    const barrierCorner = 0.85\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI)\n    barrier.position.set(0, 0, this.animation.floorHeight * barrierCorner / 2)\n    this.animation.world.add(barrier)\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), 0)\n    barrier.position.set(0, 0, -(this.animation.floorHeight * barrierCorner / 2))\n    this.animation.world.add(barrier)\n    window.barrier = barrier\n    window.CANNON = CANNON\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2)\n    barrier.position.set(this.animation.floorWidth * barrierCorner / 2, 0, 0)\n    this.animation.world.add(barrier)\n    barrier = new CANNON.Body({ mass: 0, shape: new CANNON.Plane(), material: DiceManager.barrierBodyMaterial })\n    barrier.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), Math.PI / 2)\n    barrier.position.set(-(this.animation.floorWidth * barrierCorner / 2), 0, 0)\n    this.animation.world.add(barrier)\n    // DICE COLORS\n    // const fontColor = this.$vuetify.theme.isDark ? '#ffffff' : '#000000'\n    const fontColor = this.diceFontColor\n    // const backColor = getComputedStyle(document.body).getPropertyValue('--v-primary-base').trim()\n    const backColor = this.diceFillColor\n    // const backColors = ['#ff0000','#00ff00','#0000ff','#777700','#770077','#007777']\n    this.dices.forEach((dice, i) => {\n      var d\n      switch (dice) {\n        case 'tetrahedron':\n          d = new DiceD4({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD4({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'cube':\n          d = new DiceD6({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD6({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'octahedron':\n          d = new DiceD8({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD8({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'dipyramid':\n          d = new DiceD10({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD10({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'dodecahedron':\n          d = new DiceD12({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD12({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n        case 'icosahedron':\n          d = new DiceD20({ size: 1.5, backColor: backColor, fontColor: fontColor })\n          // d = new DiceD20({ size: 1.5, backColor: backColors[i], fontColor: fontColor })\n          break\n      }\n      this.animation.scene.add(d.getObject())\n      this.animation.dice.push(d)\n    })\n    this.animation.diceThrow = () => {\n      if (this.animation.pos == null) this.animation.randomDiceThrow()\n      const pos = this.animation.pos\n      const velocity = this.animation.velocity\n      this.animation.isThrought = true\n      this.animation.diceAnimationStep = 0\n      this.animation.diceValues = []\n      if (Math.abs(velocity.x) > 100) velocity.x /= (Math.abs(velocity.x) / 100)\n      if (Math.abs(velocity.y) > 100) velocity.y /= (Math.abs(velocity.y) / 100)\n      if (Math.abs(velocity.z) > 100) velocity.z /= (Math.abs(velocity.z) / 100)\n      var i\n      for (i = 0; i < this.animation.dice.length; i++) {\n          this.animation.dice[i].getObject().position.x = pos.x - (i % 3) * 1.5\n          this.animation.dice[i].getObject().position.y = pos.y + Math.floor(i / 3) * 1.5\n          this.animation.dice[i].getObject().position.z = pos.z + (i % 3) * 1.5\n          // this.animation.dice[i].getObject().quaternion.x = (Math.random()*90-45) * Math.PI / 180;\n          // this.animation.dice[i].getObject().quaternion.z = (Math.random()*90-45) * Math.PI / 180;\n          this.animation.dice[i].updateBodyFromMesh()\n          // const yRand = Math.random() * 10\n          // const rand = Math.random() * 1 + 1\n          this.animation.dice[i].getObject().body.velocity.set(\n                          velocity.x,\n                          velocity.y,\n                          velocity.z)\n          this.animation.dice[i].getObject().body.angularVelocity.set(\n                          10 * Math.random() - 10,\n                          10 * Math.random() - 10,\n                          10 * Math.random() - 10)\n\n          this.animation.diceValues.push({ dice: this.animation.dice[i], value: i + 1 })\n      }\n      var roll = this.roll\n      for (i = 0; i < this.animation.diceValues.length; i++) {\n        this.animation.diceValues[i].value = Math.ceil(Math.random() * Math.min(this.animation.diceValues[i].dice.values, (roll - (this.animation.diceValues.length - i - 1))))\n        roll -= this.animation.diceValues[i].value\n      }\n      while (roll > 0) {\n        for (i = 0; i < this.animation.diceValues.length; i++) {\n          if (this.animation.diceValues[i].value < this.animation.diceValues[i].dice.values) {\n            var add = Math.ceil(Math.random() * Math.min(this.animation.diceValues[i].dice.values - this.animation.diceValues[i].value, roll))\n            this.animation.diceValues[i].value += add\n            roll -= add\n            if (roll <= 0) break\n          }\n        }\n      }\n\n      DiceManager.prepareValues(this.animation.diceValues, floorBody)\n      this.animation.pos = null\n      this.animation.velocity = null\n    }\n    const makeRandomVector = (vector) => {\n      var rnd = Math.random()\n      var randomAngle = rnd * Math.PI / 5 - Math.PI / 5 / 2\n      var vec = {\n          x: vector.x * Math.cos(randomAngle) - vector.y * Math.sin(randomAngle),\n          y: vector.x * Math.sin(randomAngle) + vector.y * Math.cos(randomAngle)\n      }\n      if (vec.x === 0) vec.x = 0.01\n      if (vec.y === 0) vec.y = 0.01\n      return vec\n    }\n    this.animation.randomDiceThrow = () => {\n      var rnd = Math.random()\n      var vector = { x: (rnd * 2 - 1) * this.animation.floorWidth, y: -(rnd * 2 - 1) * this.animation.floorHeight }\n      var dist = Math.sqrt(vector.x * vector.x + vector.y * vector.y)\n      var boost = dist * 0.1 // (rnd ) * dist*0.05;\n\n      var vec = makeRandomVector(vector)\n      var pos = {\n          x: this.animation.floorWidth / 2 * (vec.x > 0 ? -1 : 1) * 0.9,\n          y: 10,\n          z: this.animation.floorHeight / 2 * (vec.y > 0 ? -1 : 1) * 0.9\n      }\n      var projector = Math.abs(vec.x / vec.y)\n      if (projector > 1.0) pos.z /= projector; else pos.x *= projector\n      var velvec = makeRandomVector(vector)\n      var velocity = { x: velvec.x * boost, y: -0.01, z: velvec.y * boost }\n      this.animation.pos = pos\n      this.animation.velocity = velocity\n    }\n    const getMouseCoords = ev => {\n      var touches = ev.changedTouches\n      if (touches) return { x: touches[0].clientX, y: touches[0].clientY }\n      return { x: ev.clientX, y: ev.clientY }\n    }\n    const mouseStart = ev => {\n      ev.preventDefault()\n      if (this.playing) return\n      this.animation.mouse_time = (new Date()).getTime()\n      this.animation.mouse_start = getMouseCoords(ev)\n    }\n    const mouseEnd = ev => {\n      if (this.animation.mouse_start === undefined) return\n      ev.stopPropagation()\n      var m = getMouseCoords(ev)\n      var vector = { x: m.x - this.animation.mouse_start.x, y: (m.y - this.animation.mouse_start.y) }\n      this.animation.mouse_start = undefined\n      var dist = Math.sqrt(vector.x * vector.x + vector.y * vector.y)\n      if (dist < Math.sqrt(this.animation.floorWidth * this.animation.floorHeight * 0.01)) return\n      var timeInt = (new Date()).getTime() - this.animation.mouse_time\n      if (timeInt > 2000) timeInt = 2000\n      var boost = Math.sqrt((2500 - timeInt) / 2500) * dist * 0.001\n\n      // var rnd = Math.random()\n      var vec = makeRandomVector(vector)\n      var pos = {\n          x: this.animation.floorWidth / 2 * (vec.x > 0 ? -1 : 1) * 0.9,\n          y: 10,\n          z: this.animation.floorHeight / 2 * (vec.y > 0 ? -1 : 1) * 0.9\n      }\n      var projector = Math.abs(vec.x / vec.y)\n      if (projector > 1.0) pos.z /= projector; else pos.x *= projector\n      var velvec = makeRandomVector(vector)\n      var velocity = { x: velvec.x * boost, y: -0.01, z: velvec.y * boost }\n      this.animation.pos = pos\n      this.animation.velocity = velocity\n      this.play(this.bet)\n      // this.animation.diceThrow(pos,velocity)\n    }\n    this.animation.renderer.domElement.addEventListener('mousedown', mouseStart)\n    this.animation.renderer.domElement.addEventListener('mouseup', mouseEnd)\n    this.animation.renderer.domElement.addEventListener('touchstart', mouseStart)\n    this.animation.renderer.domElement.addEventListener('touchend', mouseEnd)\n    this.animation.world.step(1.0 / 60.0)\n    requestAnimationFrame(this.animation.animate)\n    this.animation.start = () => {\n      this.animation.diceValues = []\n      for (var i = 0; i < this.animation.dice.length; i++) {\n        this.animation.dice[i].getObject().position.x = (i % 3) * 1.7\n        this.animation.dice[i].getObject().position.y = 15 + Math.floor(i / 3) * 1.7\n        this.animation.dice[i].getObject().position.z = (i % 3) * 1.7\n        this.animation.dice[i].getObject().quaternion.x = 0\n        this.animation.dice[i].getObject().quaternion.y = 0\n        this.animation.dice[i].getObject().quaternion.z = 0\n        this.animation.dice[i].updateBodyFromMesh()\n        this.animation.dice[i].getObject().body.velocity.set(0, 10, 0)\n        this.animation.dice[i].getObject().body.angularVelocity.set(0, 5, 0)\n        this.animation.diceValues.push({ dice: this.animation.dice[i], value: i + 1 })\n      }\n      DiceManager.prepareValues(this.animation.diceValues, floorBody)\n      this.animation.dice.forEach(dice => dice.updateMeshFromBody())\n      // if(is_prep)\n    }\n    this.animation.start()\n  },\n  beforeDestroy () {\n    this.animation.animate = () => {}\n  },\n  methods: {\n    ...mapActions({\n      updateUserAccountBalance: 'auth/updateUserAccountBalance',\n      setProvablyFairGame: 'provably-fair/set'\n    }),\n    async play (bet) {\n      this.loading = true\n      this.playing = true\n      this.message = null\n      // update user balance\n      this.updateUserAccountBalance(this.account.balance - bet)\n      // API request params\n      const endpoint = this.getRoute('play')\n      const requestParams = { hash: this.provablyFairGame.hash, bet, direction: this.direction, ref_number: this.refNumber }\n      // execute the action\n      const { data: game } = await axios.post(endpoint, requestParams)\n      this.loading = false\n      this.roll = game.gameable.roll\n      this.setProvablyFairGame({ key: this.gamePackageId, game: game.pf_game })\n\n      this.animation.result = {\n        balance: game.account.balance,\n        win: game.win\n      }\n      this.animation.diceThrow()\n    },\n    decrementRefNumber () {\n      this.refNumber = Math.max(this.minRefNumber, --this.refNumber)\n    },\n    incrementRefNumber () {\n      this.refNumber = Math.min(this.maxRefNumber, ++this.refNumber)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .animation {\n    width:100%;\n    max-width:1200px;\n    height:350px;\n    z-index: 3;\n    &::v-deep canvas {\n      z-index: 3;\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n  .message-container {\n    position:relative;\n    height:0;\n    z-index:2;\n    .message {\n      position:absolute;\n      top:5px;\n      left:50%;\n      transform: translateX(-50%);\n    }\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=js&\"","import api from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[1]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[2]!../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[3]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&id=681e7a9a&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=681e7a9a&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=js&\"\nexport * from \"./game.vue?vue&type=script&lang=js&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&id=681e7a9a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"681e7a9a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VBtnToggle,VCol,VForm,VIcon,VSlider,VTextField})\n"],"sourceRoot":""}