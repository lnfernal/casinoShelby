{"version":3,"sources":["webpack:///./packages/raffle/resources/js/components/RaffleCard.vue?9185","webpack:///packages/raffle/resources/js/components/RaffleCard.vue","webpack:///./packages/raffle/resources/js/components/RaffleCard.vue?fb05","webpack:///resources/js/components/CountdownTimer.vue","webpack:///./resources/js/components/CountdownTimer.vue?2162","webpack:///./packages/raffle/resources/js/components/RaffleCard.vue?e5b7","webpack:///./packages/raffle/resources/js/components/RaffleCard.vue?e9f5","webpack:///./resources/js/components/CountdownTimer.vue?47eb","webpack:///./packages/raffle/resources/js/pages/raffles/current.vue?8b3a","webpack:///packages/raffle/resources/js/pages/raffles/current.vue","webpack:///./packages/raffle/resources/js/pages/raffles/current.vue?4568","webpack:///./packages/raffle/resources/js/pages/raffles/current.vue"],"names":["___CSS_LOADER_EXPORT___","push","module","id","components","mixins","Form","props","raffle","type","Object","required","data","displayForm","formSuccessMessages","form","quantity","computed","maxTickets","Math","min","quantityInputSuffix","this","soldTickets","integer","soldTicketsPct","tickets_count","total_tickets","totalTickets","potSizePct","watch","wasDisplayed","currentlyDisplayed","reset","methods","endDate","Number","timer","interval","destroy","create","created","beforeDestroy","tick","setInterval","clearInterval","seconds","minutes","hours","days","diff","options","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","title","scopedSlots","_u","key","fn","ref","hover","banner","proxy","on","$event","preventDefault","purchase","model","value","callback","$$v","formIsValid","expression","max_tickets_per_user","$t","user_tickets_count","_e","busy","validationPositiveInteger","v","validationMax","errors","has","get","ticket_price","clearFormErrors","$set","_n","description","pot_size","max_pot_size","end_date_unix","staticRenderFns","metaInfo","raffles","displayCount","config","loadCount","loadMore","update","splice","i","component","_l","slice","length","VBtn"],"mappings":"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","file":"js/packages/raffle-resources-js-pages-raffles-current.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".width-90[data-v-68e2687e]{width:90%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./packages/raffle/resources/js/components/RaffleCard.vue\"],\"names\":[],\"mappings\":\"AAuNA,2BACE,SAtNF\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.width-90 {\\n  width: 90%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<template>\n  <v-card elevation=\"5\">\n    <v-list-item>\n      <v-list-item-content>\n        <v-list-item-title class=\"headline py-2\">\n          {{ raffle.title }}\n        </v-list-item-title>\n      </v-list-item-content>\n    </v-list-item>\n    <v-hover v-slot:default=\"{ hover }\" v-model=\"displayForm\" close-delay=\"3000\">\n      <v-img :src=\"raffle.banner || ''\" height=\"300\" :alt=\"raffle.title\" :title=\"raffle.title\" dark>\n        <template v-slot:placeholder>\n          <v-skeleton-loader type=\"image\" />\n        </template>\n        <v-expand-transition>\n          <div v-if=\"hover\" class=\"fill-height secondary darken-2 transition-fast-in-fast-out v-card--reveal\">\n            <v-form\n              v-model=\"formIsValid\"\n              class=\"d-flex fill-height justify-center align-center\"\n              @submit.prevent=\"purchase\"\n            >\n              <div class=\"text-center width-90\">\n                <template v-if=\"maxTickets > 0\">\n                  <template v-if=\"raffle.max_tickets_per_user > 0\">\n                    <h6 class=\"text-h6 font-weight-thin\">\n                      {{ $t('Tickets bought / limit') }}\n                    </h6>\n                    <v-progress-linear\n                      :value=\"100 * raffle.user_tickets_count / raffle.max_tickets_per_user\"\n                      color=\"primary\"\n                      height=\"20\"\n                      striped\n                      rounded\n                      class=\"mt-4 mb-6\"\n                    >\n                      <template>\n                        <strong>{{ raffle.user_tickets_count }} / {{ raffle.max_tickets_per_user }}</strong>\n                      </template>\n                    </v-progress-linear>\n                  </template>\n                  <v-text-field\n                    v-model.number=\"form.quantity\"\n                    :label=\"$t('Number of tickets')\"\n                    :disabled=\"form.busy\"\n                    :rules=\"[validationPositiveInteger, v => validationMax(v, maxTickets)]\"\n                    :error=\"form.errors.has('quantity')\"\n                    :error-messages=\"form.errors.get('quantity')\"\n                    :success-messages=\"formSuccessMessages\"\n                    outlined\n                    :hint=\"$t('1 ticket costs {0} credits', [raffle.ticket_price])\"\n                    :persistent-hint=\"true\"\n                    :suffix=\"quantityInputSuffix\"\n                    @keydown=\"clearFormErrors($event,'quantity')\"\n                  />\n                  <v-btn type=\"submit\" color=\"primary\" :disabled=\"!formIsValid || form.busy\" :loading=\"form.busy\">\n                    {{ $t('Buy') }}\n                  </v-btn>\n                </template>\n                <h6 v-else class=\"text-h6\">\n                  {{ $t('You can not buy tickets.') }}\n                </h6>\n              </div>\n            </v-form>\n          </div>\n        </v-expand-transition>\n      </v-img>\n    </v-hover>\n    <v-card-text v-if=\"raffle.description\">\n      {{ raffle.description }}\n    </v-card-text>\n    <v-card-text class=\"text-center\">\n      <h6 class=\"text-h6 font-weight-thin\">\n        {{ $t('Tickets sold / total') }}\n      </h6>\n      <v-progress-linear\n        :value=\"soldTicketsPct\"\n        color=\"primary\"\n        height=\"20\"\n        striped\n        rounded\n        class=\"my-4\"\n      >\n        <template>\n          <strong>{{ soldTickets }} / {{ totalTickets }}</strong>\n        </template>\n      </v-progress-linear>\n      <h6 class=\"text-h6 font-weight-thin\">\n        {{ $t('Current / max pot size') }}\n      </h6>\n      <v-progress-linear\n        :value=\"potSizePct\"\n        color=\"primary\"\n        height=\"20\"\n        striped\n        rounded\n        class=\"my-4\"\n      >\n        <template>\n          <strong>{{ integer(raffle.pot_size) }} / {{ integer(raffle.max_pot_size) }} {{ $t('credits') }}</strong>\n        </template>\n      </v-progress-linear>\n    </v-card-text>\n    <v-divider class=\"mt-2 mb-2 mx-4\" />\n    <v-card-text>\n      <v-row class=\"align-center\">\n        <v-col cols=\"12\" sm=\"6\" lg=\"8\" class=\"text-center text-sm-left\">\n          <v-icon>mdi-clock-outline</v-icon>\n          <span v-if=\"raffle.end_date_unix\">\n            {{ $t('Raffle will end in') }}\n            <countdown-timer :end-date=\"raffle.end_date_unix\" class=\"text-no-wrap\" />\n          </span>\n          <span v-else>\n            {{ $t('Raffle will end when all tickets are sold') }}\n          </span>\n        </v-col>\n        <v-col cols=\"12\" sm=\"6\" lg=\"4\" class=\"text-center text-sm-right\">\n          <v-btn color=\"primary\" @click=\"displayForm = !displayForm\">\n            {{ $t('Buy tickets') }}\n          </v-btn>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport Form from 'vform'\nimport FormMixin from '~/mixins/Form'\nimport CountdownTimer from '~/components/CountdownTimer'\nimport { integer } from '~/plugins/format'\n\nexport default {\n  components: { CountdownTimer },\n  mixins: [FormMixin],\n\n  props: {\n    raffle: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data () {\n    return {\n      displayForm: false,\n      formSuccessMessages: [], // should be an array\n      form: new Form({\n        quantity: null\n      })\n    }\n  },\n\n  computed: {\n    ...mapState('auth', ['account']),\n    maxTickets () {\n      const maxTicketsPerUser = this.raffle.max_tickets_per_user || this.raffle.total_tickets\n\n      return Math.min(\n        this.raffle.total_tickets - this.raffle.tickets_count, // number of tickets left in the raffle\n        maxTicketsPerUser - this.raffle.user_tickets_count, // number of tickets allowed for a user\n        Math.floor(this.account.balance / this.raffle.ticket_price) // number of tickets user can buy with their balance\n      )\n    },\n    quantityInputSuffix () {\n      return this.form.quantity > 0\n        ? `x ${this.raffle.ticket_price} = ${this.raffle.ticket_price * this.form.quantity} ${this.$t('credits')}`\n        : ''\n    },\n    soldTickets () {\n      return integer(this.raffle.tickets_count)\n    },\n    soldTicketsPct () {\n      return 100 * this.raffle.tickets_count / this.raffle.total_tickets\n    },\n    totalTickets () {\n      return integer(this.raffle.total_tickets)\n    },\n    potSizePct () {\n      return 100 * this.raffle.tickets_count / this.raffle.total_tickets\n    }\n  },\n\n  watch: {\n    displayForm (currentlyDisplayed, wasDisplayed) {\n      if (wasDisplayed && !currentlyDisplayed) {\n        this.form.reset()\n      }\n    }\n  },\n\n  methods: {\n    integer,\n    ...mapActions({\n      updateUserAccountBalance: 'auth/updateUserAccountBalance'\n    }),\n    async purchase () {\n      const quantity = this.form.quantity\n\n      const { data } = await this.form.post(`/api/raffles/${this.raffle.id}`)\n\n      this.formSuccessMessages.push(this.$t('You purchased {0} tickets', [quantity]))\n\n      this.updateUserAccountBalance(data.account.balance)\n\n      this.$emit('update', { raffle: data.raffle })\n\n      setTimeout(() => {\n        this.formSuccessMessages = []\n      }, 5000)\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.width-90 {\n  width: 90%;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaffleCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaffleCard.vue?vue&type=script&lang=js&\"","<template>\n  <span>{{ timer }}</span>\n</template>\n<script>\nexport default {\n  props: {\n    endDate: {\n      type: Number,\n      required: true\n    }\n  },\n\n  data () {\n    return {\n      timer: null,\n      interval: null\n    }\n  },\n\n  watch: {\n    endDate (endDate) {\n      if (endDate) {\n        this.destroy()\n        this.create()\n      }\n    }\n  },\n\n  created () {\n    this.create()\n  },\n\n  beforeDestroy () {\n    this.destroy()\n  },\n\n  methods: {\n    create () {\n      this.tick()\n      this.interval = setInterval(this.tick, 1000)\n    },\n    destroy () {\n      clearInterval(this.interval)\n    },\n    tick () {\n      let diff = Math.max(0, Math.round(this.endDate - Date.now() / 1000))\n      let seconds = Math.floor(diff % 60)\n      let minutes = Math.floor((diff / 60) % 60)\n      let hours = Math.floor((diff / (60 * 60)) % 24)\n      let days = Math.floor(diff / (60 * 60 * 24))\n\n      seconds = seconds < 10 ? '0' + seconds : seconds\n      minutes = minutes < 10 ? '0' + minutes : minutes\n      hours = hours < 10 ? '0' + hours : hours\n\n      this.timer = (days > 0 ? `${days}${this.$t('d')} : ` : '') +\n        (hours > 0 || days > 0 ? `${hours}${this.$t('h')} : ` : '') +\n        `${minutes}${this.$t('m')} : ${seconds}${this.$t('s')}`\n\n      // clear interval if time elapsed\n      if (diff === 0 && this.interval) {\n        clearInterval(this.interval)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=script&lang=js&\"","import api from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[1]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[2]!../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[3]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaffleCard.vue?vue&type=style&index=0&id=68e2687e&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"elevation\":\"5\"}},[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"headline py-2\"},[_vm._v(\"\\n        \"+_vm._s(_vm.raffle.title)+\"\\n      \")])],1)],1),_vm._v(\" \"),_c('v-hover',{attrs:{\"close-delay\":\"3000\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-img',{attrs:{\"src\":_vm.raffle.banner || '',\"height\":\"300\",\"alt\":_vm.raffle.title,\"title\":_vm.raffle.title,\"dark\":\"\"},scopedSlots:_vm._u([{key:\"placeholder\",fn:function(){return [_c('v-skeleton-loader',{attrs:{\"type\":\"image\"}})]},proxy:true}],null,true)},[_vm._v(\" \"),_c('v-expand-transition',[(hover)?_c('div',{staticClass:\"fill-height secondary darken-2 transition-fast-in-fast-out v-card--reveal\"},[_c('v-form',{staticClass:\"d-flex fill-height justify-center align-center\",on:{\"submit\":function($event){$event.preventDefault();return _vm.purchase($event)}},model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[_c('div',{staticClass:\"text-center width-90\"},[(_vm.maxTickets > 0)?[(_vm.raffle.max_tickets_per_user > 0)?[_c('h6',{staticClass:\"text-h6 font-weight-thin\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('Tickets bought / limit'))+\"\\n                  \")]),_vm._v(\" \"),_c('v-progress-linear',{staticClass:\"mt-4 mb-6\",attrs:{\"value\":100 * _vm.raffle.user_tickets_count / _vm.raffle.max_tickets_per_user,\"color\":\"primary\",\"height\":\"20\",\"striped\":\"\",\"rounded\":\"\"}},[[_c('strong',[_vm._v(_vm._s(_vm.raffle.user_tickets_count)+\" / \"+_vm._s(_vm.raffle.max_tickets_per_user))])]],2)]:_vm._e(),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":_vm.$t('Number of tickets'),\"disabled\":_vm.form.busy,\"rules\":[_vm.validationPositiveInteger, function (v) { return _vm.validationMax(v, _vm.maxTickets); }],\"error\":_vm.form.errors.has('quantity'),\"error-messages\":_vm.form.errors.get('quantity'),\"success-messages\":_vm.formSuccessMessages,\"outlined\":\"\",\"hint\":_vm.$t('1 ticket costs {0} credits', [_vm.raffle.ticket_price]),\"persistent-hint\":true,\"suffix\":_vm.quantityInputSuffix},on:{\"keydown\":function($event){return _vm.clearFormErrors($event,'quantity')}},model:{value:(_vm.form.quantity),callback:function ($$v) {_vm.$set(_vm.form, \"quantity\", _vm._n($$v))},expression:\"form.quantity\"}}),_vm._v(\" \"),_c('v-btn',{attrs:{\"type\":\"submit\",\"color\":\"primary\",\"disabled\":!_vm.formIsValid || _vm.form.busy,\"loading\":_vm.form.busy}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Buy'))+\"\\n                \")])]:_c('h6',{staticClass:\"text-h6\"},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('You can not buy tickets.'))+\"\\n              \")])],2)])],1):_vm._e()])],1)]}}]),model:{value:(_vm.displayForm),callback:function ($$v) {_vm.displayForm=$$v},expression:\"displayForm\"}}),_vm._v(\" \"),(_vm.raffle.description)?_c('v-card-text',[_vm._v(\"\\n    \"+_vm._s(_vm.raffle.description)+\"\\n  \")]):_vm._e(),_vm._v(\" \"),_c('v-card-text',{staticClass:\"text-center\"},[_c('h6',{staticClass:\"text-h6 font-weight-thin\"},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('Tickets sold / total'))+\"\\n    \")]),_vm._v(\" \"),_c('v-progress-linear',{staticClass:\"my-4\",attrs:{\"value\":_vm.soldTicketsPct,\"color\":\"primary\",\"height\":\"20\",\"striped\":\"\",\"rounded\":\"\"}},[[_c('strong',[_vm._v(_vm._s(_vm.soldTickets)+\" / \"+_vm._s(_vm.totalTickets))])]],2),_vm._v(\" \"),_c('h6',{staticClass:\"text-h6 font-weight-thin\"},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('Current / max pot size'))+\"\\n    \")]),_vm._v(\" \"),_c('v-progress-linear',{staticClass:\"my-4\",attrs:{\"value\":_vm.potSizePct,\"color\":\"primary\",\"height\":\"20\",\"striped\":\"\",\"rounded\":\"\"}},[[_c('strong',[_vm._v(_vm._s(_vm.integer(_vm.raffle.pot_size))+\" / \"+_vm._s(_vm.integer(_vm.raffle.max_pot_size))+\" \"+_vm._s(_vm.$t('credits')))])]],2)],1),_vm._v(\" \"),_c('v-divider',{staticClass:\"mt-2 mb-2 mx-4\"}),_vm._v(\" \"),_c('v-card-text',[_c('v-row',{staticClass:\"align-center\"},[_c('v-col',{staticClass:\"text-center text-sm-left\",attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"8\"}},[_c('v-icon',[_vm._v(\"mdi-clock-outline\")]),_vm._v(\" \"),(_vm.raffle.end_date_unix)?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.$t('Raffle will end in'))+\"\\n          \"),_c('countdown-timer',{staticClass:\"text-no-wrap\",attrs:{\"end-date\":_vm.raffle.end_date_unix}})],1):_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.$t('Raffle will end when all tickets are sold'))+\"\\n        \")])],1),_vm._v(\" \"),_c('v-col',{staticClass:\"text-center text-sm-right\",attrs:{\"cols\":\"12\",\"sm\":\"6\",\"lg\":\"4\"}},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){_vm.displayForm = !_vm.displayForm}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('Buy tickets'))+\"\\n        \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(_vm._s(_vm.timer))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[(_vm.raffles)?[(_vm.raffles.length)?_c('v-row',{attrs:{\"justify\":\"center\"}},_vm._l((_vm.raffles.slice(0, _vm.displayCount)),function(raffle,i){return _c('v-col',{key:raffle.id,attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('raffle-card',{attrs:{\"raffle\":raffle},on:{\"update\":function($event){return _vm.update($event.raffle, i)}}})],1)}),1):_c('h5',{staticClass:\"text-h5 mt-5\"},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('No raffles are running at the moment.'))+\"\\n    \")]),_vm._v(\" \"),(_vm.displayCount > 0 && _vm.displayCount < _vm.raffles.length)?_c('v-row',{staticClass:\"my-10\"},[_c('v-col',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"color\":\"primary\",\"large\":\"\"},on:{\"click\":_vm.loadMore}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"\\n            mdi-autorenew\\n          \")]),_vm._v(\"\\n          \"+_vm._s(_vm.$t('Load more'))+\"\\n        \")],1)],1)],1):_vm._e()]:_c('v-row',_vm._l(([0,1]),function(i){return _c('v-col',{key:i,attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-skeleton-loader',{attrs:{\"type\":\"card\"}})],1)}),1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container>\r\n    <template v-if=\"raffles\">\r\n      <v-row v-if=\"raffles.length\" justify=\"center\">\r\n        <v-col\r\n          v-for=\"(raffle, i) in raffles.slice(0, displayCount)\"\r\n          :key=\"raffle.id\"\r\n          cols=\"12\"\r\n          md=\"6\"\r\n        >\r\n          <raffle-card :raffle=\"raffle\" @update=\"update($event.raffle, i)\"/>\r\n        </v-col>\r\n      </v-row>\r\n      <h5 v-else class=\"text-h5 mt-5\">\r\n        {{ $t('No raffles are running at the moment.') }}\r\n      </h5>\r\n      <v-row v-if=\"displayCount > 0 && displayCount < raffles.length\" class=\"my-10\">\r\n        <v-col class=\"text-center\">\r\n          <v-btn color=\"primary\" large @click=\"loadMore\">\r\n            <v-icon left>\r\n              mdi-autorenew\r\n            </v-icon>\r\n            {{ $t('Load more') }}\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n    </template>\r\n    <v-row v-else>\r\n      <v-col v-for=\"i in [0,1]\" :key=\"i\" cols=\"12\" md=\"6\">\r\n        <v-skeleton-loader type=\"card\"/>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport RaffleCard from 'packages/raffle/resources/js/components/RaffleCard'\r\nimport { config } from '~/plugins/config'\r\n\r\nexport default {\r\n  components: { RaffleCard },\r\n\r\n  metaInfo () {\r\n    return { title: this.$t('Current raffles') }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      raffles: null,\r\n      displayCount: config('raffle.display_count'),\r\n      loadCount: config('raffle.load_count')\r\n    }\r\n  },\r\n\r\n  async created () {\r\n    this.$store.dispatch('auth/fetchUser')\r\n\r\n    const { data } = await axios.get('/api/raffles')\r\n\r\n    this.raffles = data\r\n  },\r\n\r\n  methods: {\r\n    loadMore () {\r\n      this.displayCount += this.loadCount\r\n    },\r\n    update (raffle, i) {\r\n      this.raffles.splice(i, 1, raffle)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./current.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./current.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./current.vue?vue&type=template&id=68ead070&\"\nimport script from \"./current.vue?vue&type=script&lang=js&\"\nexport * from \"./current.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\ninstallComponents(component, {VBtn,VCol,VContainer,VIcon,VRow,VSkeletonLoader})\n"],"sourceRoot":""}